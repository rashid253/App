<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Ramadan Calendar Generator - Admin</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Web App Manifest for installation -->
    <link rel="manifest" href="data:application/manifest+json,%7B%22name%22%3A%22Ramadan%20Calendar%22%2C%22short_name%22%3A%22Ramadan%20Cal%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22theme_color%22%3A%22%231a2e1a%22%2C%22background_color%22%3A%22%231a2e1a%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20100%20100%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22%231a2e1a%22%2F%3E%3Ctext%20x%3D%2250%22%20y%3D%2265%22%20font-size%3D%2250%22%20text-anchor%3D%22middle%22%20fill%3D%22%23ffd966%22%3EğŸŒ™%3C%2Ftext%3E%3C%2Fsvg%3E%22%2C%22sizes%22%3A%22192x192%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%7D%5D%7D">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #1a2e1a;
            padding: 20px;
        }
        
        .admin-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #1e4a2e, #0f3a1f);
            border-radius: 40px 8px 40px 8px;
            padding: 20px;
            margin-bottom: 25px;
            border: 3px solid #c9a75a;
            color: white;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: #ffd966;
            font-family: 'Amiri', serif;
        }
        
        .header p {
            color: #fff5d6;
            margin-top: 10px;
        }
        
        .admin-badge {
            background: #ffd966;
            color: #1a2e1a;
            padding: 5px 15px;
            border-radius: 50px;
            display: inline-block;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .install-badge {
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            display: inline-block;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .generator-container {
            background: #faf3e2;
            border-radius: 50px 15px 50px 15px;
            padding: 30px;
            border: 3px solid #c9a75a;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        
        .section {
            background: white;
            border-radius: 30px 8px 30px 8px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #c9a75a;
        }
        
        .section-title {
            color: #1e4a2e;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-right: 4px solid #c9a75a;
            padding-right: 15px;
        }
        
        .section-title i {
            color: #c9a75a;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group.full-width {
            grid-column: span 2;
        }
        
        label {
            display: block;
            color: #1e4a2e;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .required {
            color: #e53e3e;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: 0.3s;
            font-family: 'Inter', sans-serif;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: #c9a75a;
            outline: none;
        }
        
        .profile-upload {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .profile-preview {
            width: 100px;
            height: 100px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 3px dashed #c9a75a;
        }
        
        .profile-preview i {
            font-size: 3rem;
            color: #888;
        }
        
        .profile-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .upload-btn {
            background: #1e4a2e;
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            cursor: pointer;
        }
        
        .icon-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .icon-preview {
            width: 40px;
            height: 40px;
            background: #1e4a2e;
            color: #ffd966;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 15px;
        }
        
        .card {
            background: #f9f9f9;
            border-radius: 20px;
            padding: 15px;
            border: 1px solid #c9a75a;
            position: relative;
        }
        
        .card h4 {
            color: #1e4a2e;
            margin-bottom: 15px;
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: #e8f0e8;
            border-radius: 30px;
        }
        
        .toggle-label {
            font-size: 0.9rem;
            color: #1a2e1a;
            font-weight: 500;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .3s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #1e4a2e;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        .delete-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: #e53e3e;
            color: white;
            border: 2px solid #c9a75a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.3s;
            z-index: 10;
        }
        
        .delete-btn:hover {
            background: #c53030;
            transform: scale(1.1);
        }
        
        .hidden-card {
            opacity: 0.5;
            background: #e0e0e0;
            pointer-events: none;
        }
        
        .hidden-card .delete-btn {
            pointer-events: auto;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 5px;
        }
        
        .status-active {
            background: #4CAF50;
            color: white;
        }
        
        .status-inactive {
            background: #e53e3e;
            color: white;
        }
        
        .generate-btn {
            width: 100%;
            padding: 20px;
            background: #1e4a2e;
            color: #ffd966;
            border: none;
            border-radius: 50px;
            font-size: 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .generate-btn:hover {
            background: #256635;
            transform: scale(1.02);
        }
        
        .export-btn {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .footer {
            text-align: center;
            color: #faf3e2;
            margin-top: 20px;
        }
        
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            color: #856404;
        }
        
        .install-instruction {
            background: #d4edda;
            border: 2px solid #28a745;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            color: #155724;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-group.full-width {
                grid-column: span 1;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Calendar View Styles */
        .calendar-container {
            max-width: 500px;
            margin: 0 auto;
            background: #faf3e2;
            border-radius: 50px 15px 50px 15px;
            padding: 20px;
            border: 3px solid #c9a75a;
        }
        
        .profile-card {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 30px 8px 30px 8px;
            border: 2px solid #c9a75a;
        }
        
        .profile-image {
            width: 80px;
            height: 80px;
            background: #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 3px solid #c9a75a;
        }
        
        .profile-image i {
            font-size: 2.5rem;
            color: #888;
        }
        
        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-info {
            flex: 1;
        }
        
        .profile-info h2 {
            color: #1e4a2e;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .profile-info p {
            color: #555;
            margin-bottom: 5px;
        }
        
        .calendar-ad-card {
            background: white;
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #c9a75a;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .calendar-ad-icon {
            width: 50px;
            height: 50px;
            background: #1e4a2e;
            color: #ffd966;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .calendar-ad-content {
            flex: 1;
        }
        
        .calendar-ad-content h3 {
            color: #1e4a2e;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .calendar-ad-link {
            display: inline-block;
            background: #1e4a2e;
            color: #ffd966;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .calendar-banner-card {
            background: linear-gradient(135deg, #1e4a2e, #0f3a1f);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid #c9a75a;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .calendar-banner-icon {
            width: 50px;
            height: 50px;
            background: #ffd966;
            color: #1e4a2e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .calendar-banner-content {
            flex: 1;
        }
        
        .calendar-banner-content h3 {
            color: #ffd966;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .calendar-banner-link {
            color: #ffd966;
            text-decoration: underline;
            font-size: 0.9rem;
        }
        
        .date-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin: 20px 0;
        }
        
        .date-box {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #c9a75a;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .date-box .day {
            font-weight: bold;
            color: #1e4a2e;
        }
        
        .date-box .ramadan-day {
            color: #c9a75a;
            font-size: 0.7rem;
        }
    </style>
</head>
<body>
    <div class="admin-container" id="mainContainer"></div>

    <script>
        // Check if running in standalone mode (installed)
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                             window.navigator.standalone || 
                             document.referrer.includes('android-app://');

        // Default data
        const defaultData = {
            businessName: 'Ø§Ù„Ù…Ø¯ÛŒÙ†Û Ø¬ÛŒÙˆÙ„Ø±Ø²',
            phoneNumber: '03001234567',
            email: 'info@example.com',
            businessType: 'Jewellery Store',
            address: 'Ù…Ø§ÚˆÙ„ Ù¹Ø§Ø¤Ù†ØŒ Ù„Ø§ÛÙˆØ±',
            businessDetails: 'Ø³ÙˆÙ†Û’ Ú†Ø§Ù†Ø¯ÛŒ Ú©ÛŒ Ø®Ø§Ù„Øµ Ù…ØµÙ†ÙˆØ¹Ø§Øª',
            profileIcon: 'fa-store',
            
            ad1: { text: 'Ù†Ø¦ÛŒ Ú¯ÙˆÙ„Úˆ Ú©Ù„Ú©Ø´Ù†', link: 'https://example.com/gold', icon: 'fa-gem', clickable: true, deleted: false },
            ad2: { text: 'Ø´Ø§Ø¯ÛŒ Ø¨ÛŒØ§Û ÚˆÛŒÙ„Ø²', link: 'https://example.com/wedding', icon: 'fa-heart', clickable: true, deleted: false },
            ad3: { text: 'Ø±Ù…Ø¶Ø§Ù† Ø³Ù¾ÛŒØ´Ù„', link: 'https://example.com/ramadan', icon: 'fa-moon', clickable: true, deleted: false },
            
            banner1: { text: '25% ØªØ®ÙÛŒÙ', link: 'https://example.com/discount', icon: 'fa-percent', clickable: true, deleted: false },
            banner2: { text: 'ÙØ±ÛŒ ÚˆÙ„ÛŒÙˆØ±ÛŒ', link: 'https://example.com/delivery', icon: 'fa-truck', clickable: true, deleted: false },
            banner3: { text: 'Ù„Ú©ÛŒ ÚˆØ±Ø§', link: 'https://example.com/lucky', icon: 'fa-trophy', clickable: true, deleted: false }
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Agar installed mode ho to calendar dikhao, otherwise admin panel
            if (isStandalone) {
                renderCalendarView();
                // Disable back button in installed mode
                history.pushState(null, null, location.href);
                window.onpopstate = function () {
                    history.go(1);
                };
            } else {
                renderAdminPanel();
            }
        });

        function renderAdminPanel() {
            const container = document.getElementById('mainContainer');
            const data = loadSavedData();
            
            container.innerHTML = `
                <div class="header">
                    <h1>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† 1447</h1>
                    <p>Ú©ÛŒÙ„Ù†ÚˆØ± Ø¬Ù†Ø±ÛŒÙ¹Ø± - Ø§ÛŒÚˆÙ…Ù† Ù¾ÛŒÙ†Ù„</p>
                    <div class="admin-badge">
                        <i class="fas fa-lock"></i> ØµØ±Ù Ø§ÛŒÚˆÙ…Ù† Ú©Û’ Ù„ÛŒÛ’
                    </div>
                </div>
                
                <div class="generator-container">
                    <div class="install-instruction">
                        <i class="fas fa-download"></i> Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’:<br>
                        Chrome: â‹® > Home screen Ù¾Ø± Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº<br>
                        Safari: Share > Add to Home Screen
                    </div>
                    
                    <!-- Profile Section -->
                    <div class="section">
                        <div class="section-title">
                            <i class="fas fa-store"></i>
                            Ú©Ø§Ø±ÙˆØ¨Ø§Ø± Ú©ÛŒ ØªÙØµÛŒÙ„Ø§Øª
                        </div>
                        
                        <div class="profile-upload">
                            <div class="profile-preview" id="profilePreview">
                                ${localStorage.getItem('profilePic') ? 
                                  `<img src="${localStorage.getItem('profilePic')}">` : 
                                  `<i class="fas ${data.profileIcon}"></i>`}
                            </div>
                            <div>
                                <input type="file" id="profilePic" accept="image/*" style="display:none;">
                                <button class="upload-btn" onclick="document.getElementById('profilePic').click()">
                                    <i class="fas fa-upload"></i> ØªØµÙˆÛŒØ± Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label><span class="required">*</span> Ú©Ø§Ø±ÙˆØ¨Ø§Ø± Ú©Ø§ Ù†Ø§Ù…</label>
                                <input type="text" id="businessName" value="${escapeHtml(data.businessName)}">
                            </div>
                            
                            <div class="form-group">
                                <label><span class="required">*</span> ÙÙˆÙ† Ù†Ù…Ø¨Ø±</label>
                                <input type="text" id="phoneNumber" value="${escapeHtml(data.phoneNumber)}">
                            </div>
                            
                            <div class="form-group">
                                <label>Ø§ÛŒ Ù…ÛŒÙ„</label>
                                <input type="email" id="email" value="${escapeHtml(data.email)}">
                            </div>
                            
                            <div class="form-group">
                                <label><span class="required">*</span> Ú©Ø§Ø±ÙˆØ¨Ø§Ø± Ú©ÛŒ Ù‚Ø³Ù…</label>
                                <input type="text" id="businessType" value="${escapeHtml(data.businessType)}">
                            </div>
                            
                            <div class="form-group full-width">
                                <label><span class="required">*</span> Ù…Ú©Ù…Ù„ Ù¾ØªÛ</label>
                                <textarea id="address" rows="2">${escapeHtml(data.address)}</textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>ØªÙØµÛŒÙ„</label>
                                <textarea id="businessDetails" rows="2">${escapeHtml(data.businessDetails)}</textarea>
                            </div>
                            
                            <div class="form-group">
                                <label>Ø¢Ø¦ÛŒÚ©ÙˆÙ†</label>
                                <div class="icon-selector">
                                    <div class="icon-preview" id="profileIconPreview">
                                        <i class="fas ${data.profileIcon}"></i>
                                    </div>
                                    <select id="profileIcon">
                                        <option value="fa-store" ${data.profileIcon === 'fa-store' ? 'selected' : ''}>Ø§Ø³Ù¹ÙˆØ±</option>
                                        <option value="fa-gem" ${data.profileIcon === 'fa-gem' ? 'selected' : ''}>Ø¬ÛŒÙˆÙ„Ø±ÛŒ</option>
                                        <option value="fa-stethoscope" ${data.profileIcon === 'fa-stethoscope' ? 'selected' : ''}>Ù…ÛŒÚˆÛŒÚ©Ù„</option>
                                        <option value="fa-utensils" ${data.profileIcon === 'fa-utensils' ? 'selected' : ''}>ÙÙˆÚˆ</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Ads -->
                    <div class="section">
                        <div class="section-title">
                            <i class="fas fa-ad"></i>
                            Ù¹Ø§Ù¾ Ø§ÛŒÚˆØ²
                        </div>
                        
                        <div class="cards-grid" id="topAdsContainer">
                            ${renderAdCard('ad1', data.ad1)}
                            ${renderAdCard('ad2', data.ad2)}
                            ${renderAdCard('ad3', data.ad3)}
                        </div>
                    </div>
                    
                    <!-- Bottom Banners -->
                    <div class="section">
                        <div class="section-title">
                            <i class="fas fa-images"></i>
                            Ù†ÛŒÚ†Û’ Ø¨ÛŒÙ†Ø±Ø²
                        </div>
                        
                        <div class="cards-grid" id="bottomBannersContainer">
                            ${renderBannerCard('banner1', data.banner1)}
                            ${renderBannerCard('banner2', data.banner2)}
                            ${renderBannerCard('banner3', data.banner3)}
                        </div>
                    </div>
                    
                    <button class="generate-btn" onclick="saveAndShowCalendar()">
                        <i class="fas fa-calendar-alt"></i>
                        Ú©ÛŒÙ„Ù†ÚˆØ± Ø¨Ù†Ø§Ø¦ÛŒÚº
                    </button>
                    
                    <button class="export-btn" onclick="exportData()">
                        <i class="fas fa-download"></i> ÚˆÛŒÙ¹Ø§ Ø§ÛŒÚ©Ø³Ù¾ÙˆØ±Ù¹ Ú©Ø±ÛŒÚº
                    </button>
                </div>
                
                <div class="footer">
                    <p>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ú© 1447Ú¾</p>
                </div>
            `;

            // Attach event listeners
            document.getElementById('profilePic').addEventListener('change', previewImage);
            document.getElementById('profileIcon').addEventListener('change', function(e) {
                document.getElementById('profileIconPreview').innerHTML = `<i class="fas ${e.target.value}"></i>`;
            });
        }

        function renderCalendarView() {
            const container = document.getElementById('mainContainer');
            const data = loadSavedData();
            const profilePic = localStorage.getItem('profilePic');
            
            // Generate Ramadan dates
            const weeks = [];
            for (let i = 0; i < 30; i += 7) {
                weeks.push(Array.from({length: Math.min(7, 30 - i)}, (_, j) => i + j + 1));
            }
            
            let html = `
                <div class="header">
                    <h1>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† 1447</h1>
                    <p>${data.businessName}</p>
                    <div class="install-badge">
                        <i class="fas fa-check-circle"></i> Ø§Ù†Ø³Ù¹Ø§Ù„ Ø´Ø¯Û
                    </div>
                </div>
                
                <div class="calendar-container">
                    <!-- Business Profile -->
                    <div class="profile-card">
                        <div class="profile-image">
                            ${profilePic ? 
                              `<img src="${profilePic}">` : 
                              `<i class="fas ${data.profileIcon}"></i>`}
                        </div>
                        <div class="profile-info">
                            <h2>${data.businessName}</h2>
                            <p><i class="fas fa-phone"></i> ${data.phoneNumber}</p>
                            <p><i class="fas fa-map-marker-alt"></i> ${data.address}</p>
                            <p><small>${data.businessDetails}</small></p>
                        </div>
                    </div>
                    
                    <!-- Top Ads -->
                    <h3 style="color: #1e4a2e; margin: 20px 0 10px 0;">Ù¾Ø±ÙˆÙ…ÙˆØ´Ù†Ø²</h3>
            `;
            
            // Render ads
            ['ad1', 'ad2', 'ad3'].forEach(adId => {
                const ad = data[adId];
                if (ad && !ad.deleted && ad.text) {
                    html += `
                        <div class="calendar-ad-card">
                            <div class="calendar-ad-icon">
                                <i class="fas ${ad.icon}"></i>
                            </div>
                            <div class="calendar-ad-content">
                                <h3>${ad.text}</h3>
                                ${ad.clickable ? 
                                    `<a href="${ad.link}" class="calendar-ad-link" target="_blank">
                                        <i class="fas fa-external-link-alt"></i> ØªÙØµÛŒÙ„Ø§Øª
                                    </a>` : 
                                    `<span style="color: #999;"><i class="fas fa-ban"></i> ØºÛŒØ± ÙØ¹Ø§Ù„</span>`}
                            </div>
                        </div>
                    `;
                }
            });
            
            // Calendar Grid
            html += `
                    <div style="background: white; border-radius: 20px; padding: 20px; margin: 20px 0; border: 2px solid #c9a75a;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                            <h3 style="color: #1e4a2e;">Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú©</h3>
                            <div>
                                <p><i class="fas fa-clock"></i> Ø³Ø­Ø±ÛŒ: 4:30 AM</p>
                                <p><i class="fas fa-clock"></i> Ø§ÙØ·Ø§Ø±: 6:45 PM</p>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <p style="color: #1e4a2e; font-weight: 600;">Ø±ÙˆØ²Û’: 30</p>
                        </div>
            `;
            
            weeks.forEach(week => {
                html += '<div class="date-grid">';
                week.forEach(day => {
                    html += `
                        <div class="date-box">
                            <span class="day">${day}</span>
                            <span class="ramadan-day">Ø±Ù…Ø¶Ø§Ù†</span>
                        </div>
                    `;
                });
                html += '</div>';
            });
            
            html += `</div>`; // Close calendar div
            
            // Bottom Banners
            ['banner1', 'banner2', 'banner3'].forEach(bannerId => {
                const banner = data[bannerId];
                if (banner && !banner.deleted && banner.text) {
                    html += `
                        <div class="calendar-banner-card">
                            <div class="calendar-banner-icon">
                                <i class="fas ${banner.icon}"></i>
                            </div>
                            <div class="calendar-banner-content">
                                <h3>${banner.text}</h3>
                                ${banner.clickable ? 
                                    `<a href="${banner.link}" class="calendar-banner-link" target="_blank">
                                        <i class="fas fa-external-link-alt"></i> Ù…Ø²ÛŒØ¯ Ø¬Ø§Ù†ÛŒÚº
                                    </a>` : 
                                    `<span style="color: #999;"><i class="fas fa-ban"></i> ØºÛŒØ± ÙØ¹Ø§Ù„</span>`}
                            </div>
                        </div>
                    `;
                }
            });
            
            html += `
                </div>
                <div class="footer">
                    <p>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ú© 1447Ú¾</p>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // Helper Functions
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function loadSavedData() {
            const saved = localStorage.getItem('ramadanBusinessData');
            return saved ? JSON.parse(saved) : {...defaultData};
        }

        function previewImage(e) {
            if (e.target.files && e.target.files[0]) {
                const reader = new FileReader();
                reader.onload = function(ev) {
                    document.getElementById('profilePreview').innerHTML = `<img src="${ev.target.result}" style="width:100%;height:100%;object-fit:cover;">`;
                    localStorage.setItem('profilePic', ev.target.result);
                };
                reader.readAsDataURL(e.target.files[0]);
            }
        }

        function renderAdCard(id, ad) {
            const statusText = ad.deleted ? 'Ø­Ø°Ù Ø´Ø¯Û' : (ad.clickable ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ± ÙØ¹Ø§Ù„');
            const statusClass = ad.deleted ? 'status-inactive' : (ad.clickable ? 'status-active' : 'status-inactive');
            
            return `
                <div class="card ${ad.deleted ? 'hidden-card' : ''}" id="${id}Card">
                    <div class="delete-btn" onclick="deleteCard('${id}')">
                        <i class="fas fa-times"></i>
                    </div>
                    <h4>${id.toUpperCase()} <span id="${id}Status" class="status-badge ${statusClass}">${statusText}</span></h4>
                    
                    <div class="toggle-container">
                        <span class="toggle-label"><i class="fas fa-mouse-pointer"></i> Ú©Ù„Ú© Ø§ÛŒØ¨Ù„</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="${id}Clickable" ${ad.clickable ? 'checked' : ''} onchange="toggleClickable('${id}')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <input type="text" id="${id}Text" value="${escapeHtml(ad.text)}" placeholder="Ù…ØªÙ†" style="margin-bottom:5px;">
                    <input type="text" id="${id}Link" value="${escapeHtml(ad.link)}" placeholder="Ù„Ù†Ú©" style="margin-bottom:5px;">
                    
                    <select id="${id}Icon" style="margin-top:5px;">
                        <option value="fa-gem" ${ad.icon === 'fa-gem' ? 'selected' : ''}>Ø¬ÛŒÙˆÙ„Ø±ÛŒ</option>
                        <option value="fa-percent" ${ad.icon === 'fa-percent' ? 'selected' : ''}>ØªØ®ÙÛŒÙ</option>
                        <option value="fa-heart" ${ad.icon === 'fa-heart' ? 'selected' : ''}>Ø´Ø§Ø¯ÛŒ</option>
                        <option value="fa-gift" ${ad.icon === 'fa-gift' ? 'selected' : ''}>ØªØ­ÙÛ</option>
                        <option value="fa-moon" ${ad.icon === 'fa-moon' ? 'selected' : ''}>Ø±Ù…Ø¶Ø§Ù†</option>
                        <option value="fa-star" ${ad.icon === 'fa-star' ? 'selected' : ''}>Ø³ØªØ§Ø±Û</option>
                    </select>
                </div>
            `;
        }

        function renderBannerCard(id, banner) {
            const statusText = banner.deleted ? 'Ø­Ø°Ù Ø´Ø¯Û' : (banner.clickable ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ± ÙØ¹Ø§Ù„');
            const statusClass = banner.deleted ? 'status-inactive' : (banner.clickable ? 'status-active' : 'status-inactive');
            
            return `
                <div class="card ${banner.deleted ? 'hidden-card' : ''}" id="${id}Card">
                    <div class="delete-btn" onclick="deleteCard('${id}')">
                        <i class="fas fa-times"></i>
                    </div>
                    <h4>${id.toUpperCase()} <span id="${id}Status" class="status-badge ${statusClass}">${statusText}</span></h4>
                    
                    <div class="toggle-container">
                        <span class="toggle-label"><i class="fas fa-mouse-pointer"></i> Ú©Ù„Ú© Ø§ÛŒØ¨Ù„</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="${id}Clickable" ${banner.clickable ? 'checked' : ''} onchange="toggleClickable('${id}')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <input type="text" id="${id}Text" value="${escapeHtml(banner.text)}" placeholder="Ù…ØªÙ†" style="margin-bottom:5px;">
                    <input type="text" id="${id}Link" value="${escapeHtml(banner.link)}" placeholder="Ù„Ù†Ú©" style="margin-bottom:5px;">
                    
                    <select id="${id}Icon" style="margin-top:5px;">
                        <option value="fa-percent" ${banner.icon === 'fa-percent' ? 'selected' : ''}>ØªØ®ÙÛŒÙ</option>
                        <option value="fa-tags" ${banner.icon === 'fa-tags' ? 'selected' : ''}>ÚˆÛŒÙ„</option>
                        <option value="fa-truck" ${banner.icon === 'fa-truck' ? 'selected' : ''}>ÚˆÙ„ÛŒÙˆØ±ÛŒ</option>
                        <option value="fa-box" ${banner.icon === 'fa-box' ? 'selected' : ''}>Ù¾ÛŒÚ©Ø¬</option>
                        <option value="fa-trophy" ${banner.icon === 'fa-trophy' ? 'selected' : ''}>Ø§Ù†Ø¹Ø§Ù…</option>
                        <option value="fa-gem" ${banner.icon === 'fa-gem' ? 'selected' : ''}>Ø¬ÛŒÙˆÙ„Ø±ÛŒ</option>
                    </select>
                </div>
            `;
        }

        // Global functions
        window.toggleClickable = function(id) {
            const checkbox = document.getElementById(id + 'Clickable');
            const statusSpan = document.getElementById(id + 'Status');
            
            statusSpan.textContent = checkbox.checked ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ± ÙØ¹Ø§Ù„';
            statusSpan.className = checkbox.checked ? 'status-badge status-active' : 'status-badge status-inactive';
        };

        window.deleteCard = function(id) {
            const card = document.getElementById(id + 'Card');
            
            if (card.classList.contains('hidden-card')) {
                card.classList.remove('hidden-card');
                const checkbox = document.getElementById(id + 'Clickable');
                const statusSpan = document.getElementById(id + 'Status');
                statusSpan.textContent = checkbox.checked ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ± ÙØ¹Ø§Ù„';
                statusSpan.className = checkbox.checked ? 'status-badge status-active' : 'status-badge status-inactive';
            } else {
                card.classList.add('hidden-card');
                const statusSpan = document.getElementById(id + 'Status');
                statusSpan.textContent = 'Ø­Ø°Ù Ø´Ø¯Û';
                statusSpan.className = 'status-badge status-inactive';
            }
        };

        window.saveAndShowCalendar = function() {
            // Collect all data
            const data = {
                businessName: document.getElementById('businessName').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                email: document.getElementById('email').value,
                businessType: document.getElementById('businessType').value,
                address: document.getElementById('address').value,
                businessDetails: document.getElementById('businessDetails').value,
                profileIcon: document.getElementById('profileIcon').value,
                
                ad1: {
                    text: document.getElementById('ad1Text').value,
                    link: document.getElementById('ad1Link').value,
                    icon: document.getElementById('ad1Icon').value,
                    clickable: document.getElementById('ad1Clickable').checked,
                    deleted: document.getElementById('ad1Card').classList.contains('hidden-card')
                },
                ad2: {
                    text: document.getElementById('ad2Text').value,
                    link: document.getElementById('ad2Link').value,
                    icon: document.getElementById('ad2Icon').value,
                    clickable: document.getElementById('ad2Clickable').checked,
                    deleted: document.getElementById('ad2Card').classList.contains('hidden-card')
                },
                ad3: {
                    text: document.getElementById('ad3Text').value,
                    link: document.getElementById('ad3Link').value,
                    icon: document.getElementById('ad3Icon').value,
                    clickable: document.getElementById('ad3Clickable').checked,
                    deleted: document.getElementById('ad3Card').classList.contains('hidden-card')
                },
                
                banner1: {
                    text: document.getElementById('banner1Text').value,
                    link: document.getElementById('banner1Link').value,
                    icon: document.getElementById('banner1Icon').value,
                    clickable: document.getElementById('banner1Clickable').checked,
                    deleted: document.getElementById('banner1Card').classList.contains('hidden-card')
                },
                banner2: {
                    text: document.getElementById('banner2Text').value,
                    link: document.getElementById('banner2Link').value,
                    icon: document.getElementById('banner2Icon').value,
                    clickable: document.getElementById('banner2Clickable').checked,
                    deleted: document.getElementById('banner2Card').classList.contains('hidden-card')
                },
                banner3: {
                    text: document.getElementById('banner3Text').value,
                    link: document.getElementById('banner3Link').value,
                    icon: document.getElementById('banner3Icon').value,
                    clickable: document.getElementById('banner3Clickable').checked,
                    deleted: document.getElementById('banner3Card').classList.contains('hidden-card')
                }
            };
            
            // Save data
            localStorage.setItem('ramadanBusinessData', JSON.stringify(data));
            
            // Show calendar view
            renderCalendarView();
        };

        window.exportData = function() {
            const data = {
                businessName: document.getElementById('businessName').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                email: document.getElementById('email').value,
                businessType: document.getElementById('businessType').value,
                address: document.getElementById('address').value,
                businessDetails: document.getElementById('businessDetails').value,
                profileIcon: document.getElementById('profileIcon').value,
                
                ad1: {
                    text: document.getElementById('ad1Text').value,
                    link: document.getElementById('ad1Link').value,
                    icon: document.getElementById('ad1Icon').value,
                    clickable: document.getElementById('ad1Clickable').checked,
                    deleted: document.getElementById('ad1Card').classList.contains('hidden-card')
                },
                ad2: {
                    text: document.getElementById('ad2Text').value,
                    link: document.getElementById('ad2Link').value,
                    icon: document.getElementById('ad2Icon').value,
                    clickable: document.getElementById('ad2Clickable').checked,
                    deleted: document.getElementById('ad2Card').classList.contains('hidden-card')
                },
                ad3: {
                    text: document.getElementById('ad3Text').value,
                    link: document.getElementById('ad3Link').value,
                    icon: document.getElementById('ad3Icon').value,
                    clickable: document.getElementById('ad3Clickable').checked,
                    deleted: document.getElementById('ad3Card').classList.contains('hidden-card')
                },
                
                banner1: {
                    text: document.getElementById('banner1Text').value,
                    link: document.getElementById('banner1Link').value,
                    icon: document.getElementById('banner1Icon').value,
                    clickable: document.getElementById('banner1Clickable').checked,
                    deleted: document.getElementById('banner1Card').classList.contains('hidden-card')
                },
                banner2: {
                    text: document.getElementById('banner2Text').value,
                    link: document.getElementById('banner2Link').value,
                    icon: document.getElementById('banner2Icon').value,
                    clickable: document.getElementById('banner2Clickable').checked,
                    deleted: document.getElementById('banner2Card').classList.contains('hidden-card')
                },
                banner3: {
                    text: document.getElementById('banner3Text').value,
                    link: document.getElementById('banner3Link').value,
                    icon: document.getElementById('banner3Icon').value,
                    clickable: document.getElementById('banner3Clickable').checked,
                    deleted: document.getElementById('banner3Card').classList.contains('hidden-card')
                }
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ramadan-data-backup.txt';
            a.click();
        };
    </script>
</body>
</html>
