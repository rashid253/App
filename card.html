<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ù…Ø¶Ø§Ù† Ú©Ø§Ø±Úˆ 1447</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0b4d3a">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Urdu Typesetting', 'Noto Nastaliq Urdu', Tahoma, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0b4d3a 0%, #1a7a5c 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 40px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            border: 3px solid #d4af37;
        }

        .islamic-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid #d4af37;
        }

        .bismillah {
            font-size: 28px;
            color: #0b4d3a;
            margin-bottom: 10px;
        }

        .ramadan-title {
            font-size: 36px;
            color: #d4af37;
            margin-bottom: 5px;
        }

        .profile-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 30px;
            margin-bottom: 25px;
            border: 2px solid #d4af37;
        }

        .profile-name {
            font-size: 32px;
            font-weight: bold;
            color: #0b4d3a;
            text-align: center;
            margin-bottom: 10px;
        }

        .profile-title {
            font-size: 22px;
            color: #d4af37;
            text-align: center;
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            color: #333;
            padding: 8px 15px;
            background: white;
            border-radius: 50px;
            margin-bottom: 8px;
        }

        .detail-item i {
            width: 30px;
            color: #d4af37;
        }

        .icons-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 25px 0;
        }

        .icon-item {
            background: linear-gradient(135deg, #0b4d3a 0%, #1a7a5c 100%);
            color: #d4af37;
            padding: 15px 10px;
            border-radius: 25px;
            text-align: center;
            text-decoration: none;
            border: 2px solid #d4af37;
            display: block;
        }

        .icon-item i {
            font-size: 28px;
            display: block;
            margin-bottom: 8px;
        }

        .banners-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .banner-text-item {
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            color: #0b4d3a;
            padding: 18px;
            border-radius: 50px;
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            border: 2px solid #0b4d3a;
        }

        .time-section {
            background: linear-gradient(135deg, #0b4d3a 0%, #1a7a5c 100%);
            padding: 25px;
            border-radius: 40px;
            margin: 25px 0;
            border: 3px solid #d4af37;
        }

        .time-header {
            text-align: center;
            color: #d4af37;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .time-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 30px;
            text-align: center;
            border: 2px solid #d4af37;
        }

        .time-label {
            color: #d4af37;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .time-value {
            color: white;
            font-size: 28px;
            font-weight: bold;
        }

        .remaining-time {
            text-align: center;
            color: #d4af37;
            font-size: 18px;
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 50px;
        }

        .calendar-section {
            margin: 25px 0;
            overflow-x: auto;
        }

        .calendar-title {
            text-align: center;
            color: #d4af37;
            font-size: 24px;
            margin-bottom: 15px;
            background: #0b4d3a;
            padding: 12px;
            border-radius: 50px;
            border: 2px solid #d4af37;
        }

        .calendar-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 25px;
            overflow: hidden;
        }

        .calendar-table th {
            background: #0b4d3a;
            color: #d4af37;
            padding: 15px;
            font-size: 18px;
            border-bottom: 3px solid #d4af37;
        }

        .calendar-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        .today-row {
            background: #fff3cd !important;
            font-weight: bold;
            border-right: 5px solid #d4af37;
        }

        .footer-banner {
            background: linear-gradient(135deg, #d4af37 0%, #b8860b 100%);
            color: #0b4d3a;
            padding: 20px;
            border-radius: 50px;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            margin: 25px 0;
            border: 3px solid #0b4d3a;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 50px;
            margin-top: 25px;
        }

        .footer-text {
            color: #d4af37;
            font-size: 26px;
            font-weight: bold;
        }

        .share-btn {
            width: 100%;
            padding: 18px;
            background: #25D366;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 25px 0;
            border: 2px solid #d4af37;
        }

        .error-card {
            text-align: center;
            padding: 50px;
        }

        .error-card i {
            font-size: 60px;
            color: #d4af37;
            margin-bottom: 20px;
        }

        .error-card h2 {
            color: #0b4d3a;
            margin-bottom: 20px;
        }

        .error-card a {
            display: inline-block;
            padding: 12px 30px;
            background: #0b4d3a;
            color: #d4af37;
            text-decoration: none;
            border-radius: 50px;
            border: 2px solid #d4af37;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container" id="mainContent">
        <!-- Card will be loaded here -->
    </div>

    <script>
        // Get user from URL
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('user');

        function getStorageKey(userId, type) {
            return `ramadan_${userId}_${type}`;
        }

        // Full Calendar Data
        const calendarData = [
            {day: 1, date: '19 Feb', sehri: '5:18 AM', iftar: '5:54 PM'},
            {day: 2, date: '20 Feb', sehri: '5:17 AM', iftar: '5:55 PM'},
            {day: 3, date: '21 Feb', sehri: '5:16 AM', iftar: '5:56 PM'},
            {day: 4, date: '22 Feb', sehri: '5:15 AM', iftar: '5:57 PM'},
            {day: 5, date: '23 Feb', sehri: '5:14 AM', iftar: '5:58 PM'},
            {day: 6, date: '24 Feb', sehri: '5:12 AM', iftar: '5:59 PM'},
            {day: 7, date: '25 Feb', sehri: '5:11 AM', iftar: '5:59 PM'},
            {day: 8, date: '26 Feb', sehri: '5:10 AM', iftar: '6:00 PM'},
            {day: 9, date: '27 Feb', sehri: '5:09 AM', iftar: '6:01 PM'},
            {day: 10, date: '28 Feb', sehri: '5:08 AM', iftar: '6:01 PM'},
            {day: 11, date: '01 Mar', sehri: '5:07 AM', iftar: '6:02 PM'},
            {day: 12, date: '02 Mar', sehri: '5:06 AM', iftar: '6:03 PM'},
            {day: 13, date: '03 Mar', sehri: '5:04 AM', iftar: '6:04 PM'},
            {day: 14, date: '04 Mar', sehri: '5:03 AM', iftar: '6:05 PM'},
            {day: 15, date: '05 Mar', sehri: '5:02 AM', iftar: '6:05 PM'},
            {day: 16, date: '06 Mar', sehri: '5:01 AM', iftar: '6:06 PM'},
            {day: 17, date: '07 Mar', sehri: '4:59 AM', iftar: '6:07 PM'},
            {day: 18, date: '08 Mar', sehri: '4:58 AM', iftar: '6:08 PM'},
            {day: 19, date: '09 Mar', sehri: '4:57 AM', iftar: '6:09 PM'},
            {day: 20, date: '10 Mar', sehri: '4:56 AM', iftar: '6:09 PM'},
            {day: 21, date: '11 Mar', sehri: '4:54 AM', iftar: '6:10 PM'},
            {day: 22, date: '12 Mar', sehri: '4:53 AM', iftar: '6:11 PM'},
            {day: 23, date: '13 Mar', sehri: '4:52 AM', iftar: '6:12 PM'},
            {day: 24, date: '14 Mar', sehri: '4:51 AM', iftar: '6:13 PM'},
            {day: 25, date: '15 Mar', sehri: '4:49 AM', iftar: '6:13 PM'},
            {day: 26, date: '16 Mar', sehri: '4:48 AM', iftar: '6:14 PM'},
            {day: 27, date: '17 Mar', sehri: '4:47 AM', iftar: '6:15 PM'},
            {day: 28, date: '18 Mar', sehri: '4:45 AM', iftar: '6:16 PM'},
            {day: 29, date: '19 Mar', sehri: '4:44 AM', iftar: '6:17 PM'},
            {day: 30, date: '20 Mar', sehri: '4:43 AM', iftar: '6:17 PM'}
        ];

        function loadCard() {
            const container = document.getElementById('mainContent');

            if (!userId) {
                container.innerHTML = `
                    <div class="card error-card">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h2>Ú©ÙˆØ¦ÛŒ Ú©Ø§Ø±Úˆ Ù†ÛÛŒÚº Ù…Ù„Ø§</h2>
                        <p>Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§Ù¾Ù†Ø§ Ù…Ù†ÙØ±Ø¯ Ù„Ù†Ú© Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº</p>
                        <a href="index.html">Ù†ÛŒØ§ Ú©Ø§Ø±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚº</a>
                    </div>
                `;
                return;
            }

            // Load user-specific data
            const profileKey = getStorageKey(userId, 'profile');
            const bannersKey = getStorageKey(userId, 'banners');
            
            const savedProfile = localStorage.getItem(profileKey);
            const savedBanners = localStorage.getItem(bannersKey);

            if (!savedProfile) {
                container.innerHTML = `
                    <div class="card error-card">
                        <i class="fas fa-user-slash"></i>
                        <h2>ÛŒÙˆØ²Ø± "${userId}" Ú©Ø§ Ú©ÙˆØ¦ÛŒ Ú©Ø§Ø±Úˆ Ù†ÛÛŒÚº</h2>
                        <a href="index.html">Ø§Ù¾Ù†Ø§ Ú©Ø§Ø±Úˆ Ø¨Ù†Ø§Ø¦ÛŒÚº</a>
                    </div>
                `;
                return;
            }

            const profile = JSON.parse(savedProfile);
            const banners = savedBanners ? JSON.parse(savedBanners) : [
                "Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© 1447Ú¾",
                "Ù‚Ø±Ø¢Ù† Ù¾Ú‘Ú¾ÛŒÚº Ø§ÙˆØ± ØµØ¯Ù‚Û Ú©Ø±ÛŒÚº",
                "Ø´Ø¨ Ù‚Ø¯Ø± ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº"
            ];

            // Get current Ramadan day
            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            
            let currentDay = 1;
            if (month === 2) {
                if (date >= 19) currentDay = date - 18;
            } else if (month === 3) {
                if (date <= 20) currentDay = date + 11;
            }
            if (currentDay > 30) currentDay = 30;
            if (currentDay < 1) currentDay = 1;

            const todayData = calendarData.find(d => d.day === currentDay) || calendarData[0];

            // Build calendar rows
            let calendarRows = '';
            calendarData.forEach(day => {
                calendarRows += `
                    <tr ${day.day === currentDay ? 'class="today-row"' : ''}>
                        <td>${day.day}</td>
                        <td>${day.date}</td>
                        <td>${day.sehri}</td>
                        <td>${day.iftar}</td>
                    </tr>
                `;
            });

            // Build banners HTML
            let bannersHTML = '';
            banners.forEach(banner => {
                bannersHTML += `<div class="banner-text-item">ğŸ•Œ ${banner}</div>`;
            });

            // Calculate remaining time
            const [iftarHour, iftarMinute] = todayData.iftar.replace(' PM', '').split(':').map(Number);
            const iftarTime = new Date();
            iftarTime.setHours(iftarHour + 12, iftarMinute, 0);
            
            const diff = iftarTime - now;
            let remainingMsg = '';
            if (diff > 0) {
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                remainingMsg = `â³ Ø§ÙØ·Ø§Ø± Ù…ÛŒÚº ${hours} Ú¯Ú¾Ù†Ù¹Û’ ${minutes} Ù…Ù†Ù¹ Ø¨Ø§Ù‚ÛŒ`;
            } else {
                remainingMsg = 'Ø§ÙØ·Ø§Ø± Ú©Ø§ ÙˆÙ‚Øª ÛÙˆ Ú†Ú©Ø§ ÛÛ’';
            }

            // Build complete card
            container.innerHTML = `
                <div class="card">
                    <div class="islamic-header">
                        <div class="bismillah">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
                        <div class="ramadan-title">ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© ğŸŒ™</div>
                        <div style="color: #0b4d3a;">1447 Ú¾ - 2026 Ø¡</div>
                    </div>

                    <div class="profile-section">
                        <div class="profile-name">${profile.name}</div>
                        <div class="profile-title">${profile.title}</div>
                        <div class="detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${profile.address}</span>
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-phone"></i>
                            <span>${profile.phone}</span>
                        </div>
                        ${profile.details ? `
                        <div class="detail-item">
                            <i class="fas fa-globe"></i>
                            <span>${profile.details}</span>
                        </div>
                        ` : ''}
                    </div>

                    <div class="icons-row">
                        <a href="https://quran.com" target="_blank" class="icon-item">
                            <i class="fas fa-quran"></i>
                            <span>Ù‚Ø±Ø¢Ù† Ù¾Ú‘Ú¾ÛŒÚº</span>
                        </a>
                        <a href="https://everyayah.com" target="_blank" class="icon-item">
                            <i class="fas fa-headphones"></i>
                            <span>Ø¢ÚˆÛŒÙˆ Ù‚Ø±Ø¢Ù†</span>
                        </a>
                        <a href="#" onclick="alert('ğŸ“¿ ØªØ³Ø¨ÛŒØ­:\n\n33 Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù\n33 Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù\n34 Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù')" class="icon-item">
                            <i class="fas fa-praying-hands"></i>
                            <span>ØªØ³Ø¨ÛŒØ­</span>
                        </a>
                        <a href="#" onclick="alert('ğŸ¤² Ø¯Ø¹Ø§Ø¦ÛŒÚº:\n\nØ³Ø­Ø±: ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ\nØ§ÙØ·Ø§Ø±: Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ÙÙ†ÙÙ‘ÛŒ Ù„ÙÚ©Ù ØµÙÙ…Ù’ØªÙ')" class="icon-item">
                            <i class="fas fa-book-open"></i>
                            <span>Ø¯Ø¹Ø§Ø¦ÛŒÚº</span>
                        </a>
                    </div>

                    <div class="banners-row">
                        ${bannersHTML}
                    </div>

                    <div class="time-section">
                        <div class="time-header">â° Ø§ÙˆÙ‚Ø§ØªÙ Ø³Ø­Ø± Ùˆ Ø§ÙØ·Ø§Ø±</div>
                        <div class="time-grid">
                            <div class="time-box">
                                <div class="time-label">Ø³Ø­Ø±</div>
                                <div class="time-value">${todayData.sehri}</div>
                            </div>
                            <div class="time-box">
                                <div class="time-label">Ø§ÙØ·Ø§Ø±</div>
                                <div class="time-value">${todayData.iftar}</div>
                            </div>
                        </div>
                        <div class="remaining-time">${remainingMsg}</div>
                    </div>

                    <div class="calendar-section">
                        <div class="calendar-title">ğŸ“… Ø±Ù…Ø¶Ø§Ù† 1447 Ú©Ø§ Ú©ÛŒÙ„Ù†ÚˆØ±</div>
                        <table class="calendar-table">
                            <thead>
                                <tr>
                                    <th>Ø±ÙˆØ²Û</th>
                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                    <th>Ø³Ø­Ø±</th>
                                    <th>Ø§ÙØ·Ø§Ø±</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${calendarRows}
                            </tbody>
                        </table>
                    </div>

                    <div class="footer-banner">
                        ğŸŒ™ ${banners[banners.length-1]} ğŸŒ™
                    </div>

                    <div class="footer">
                        <div class="footer-text">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ú© 1447</div>
                        <div style="color: white; margin-top: 10px;">ØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙÙ†ÙÙ‘Ø§ ÙˆÙÙ…ÙÙ†Ù’ÙƒÙÙ…Ù’</div>
                    </div>

                    <button class="share-btn" onclick="shareCard('${profile.name}', '${profile.title}', '${profile.phone}', '${todayData.sehri}', '${todayData.iftar}')">
                        <i class="fab fa-whatsapp"></i> ÙˆØ§Ù¹Ø³ Ø§ÛŒÙ¾ Ù¾Ø± Ø´ÛŒØ¦Ø± Ú©Ø±ÛŒÚº
                    </button>
                </div>
            `;
        }

        function shareCard(name, title, phone, sehri, iftar) {
            const text = `ğŸŒ™ *Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ú© 1447* ğŸŒ™\n\n` +
                `ğŸ‘¤ *${name}*\n` +
                `ğŸª ${title}\n` +
                `ğŸ“ ${phone}\n\n` +
                `â° *Ø§ÙˆÙ‚Ø§Øª:*\n` +
                `ğŸŒ… Ø³Ø­Ø±: ${sehri}\n` +
                `ğŸŒ‡ Ø§ÙØ·Ø§Ø±: ${iftar}\n\n` +
                `ğŸ¤² ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ…`;
            
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        // Update timings every minute
        function updateTime() {
            if (userId) loadCard();
        }

        // Load card
        loadCard();
        setInterval(updateTime, 60000);
    </script>
</body>
</html>
