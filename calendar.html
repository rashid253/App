<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Ø±Ù…Ø¶Ø§Ù† 2026 Ù¾Ø§Ú©Ø³ØªØ§Ù† | Ù…Ú©Ù…Ù„ Ø¯Ø¹Ø§Ø¦ÛŒÚº + Ù„Ø§Ø¦ÛŒÙˆ Ù¹Ø§Ø¦Ù…Ø±</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a2e1a">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Poppins', 'Nafees', 'Urdu Typesetting', sans-serif;
            background: #e7dcc0;
            padding: 12px 10px 25px;
            min-height: 100vh;
            color: #2d261b;
        }
        .app-wrapper {
            max-width: 700px;
            margin: 0 auto;
            width: 100%;
            background: rgba(255, 250, 235, 0.92);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-radius: 45px 15px 45px 15px;
            border: 2px solid #c9ad7c;
            padding: 16px 14px 28px;
            box-shadow: 0 25px 35px -8px #4d3a24;
            position: relative;
            overflow: hidden;
        }
        .app-wrapper::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(45deg, rgba(170, 130, 70, 0.03) 0px, rgba(170,130,70,0.03) 12px, transparent 12px, transparent 24px);
            pointer-events: none;
        }
        .content {
            position: relative;
            z-index: 5;
        }

        /* Ù¾Ø±ÙˆÙÛŒØ´Ù†Ù„ Ø§Ø³Ù¾Ø§Ù†Ø³Ø± Ø³ÛŒÚ©Ø´Ù† */
        .sponsor-pro-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f3e1c2;
            border-radius: 40px 8px 40px 8px;
            padding: 14px 18px;
            margin-bottom: 12px;
            border: 2px solid #ad8d5a;
            box-shadow: 0 6px 0 #8b6f42;
            cursor: pointer;
        }
        .sponsor-pro-row:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #8b6f42;
        }
        .shop-info {
            text-align: center;
            flex: 3;
        }
        .shop-name {
            font-size: 2rem;
            font-weight: 800;
            color: #1d401d;
            line-height: 1.2;
            font-family: 'Amiri', serif;
        }
        .shop-details {
            font-size: 1rem;
            color: #2d281a;
            margin-top: 5px;
        }
        .shop-details i {
            margin-left: 5px;
            color: #ac7700;
        }
        .shop-image {
            flex: 1;
            display: flex;
            justify-content: center;
        }
        .shop-image i {
            font-size: 5.5rem;
            color: #2f5a38;
            background: #ffe6af;
            border-radius: 30px 8px 30px 8px;
            padding: 10px;
            border: 3px solid #c8a255;
        }

        /* Ø¢Ø¦ÛŒÚ©ÙˆÙ†Ø² Ú©ÛŒ Ø³Ù†Ú¯Ù„ Ù‚Ø·Ø§Ø± */
        .icon-strip {
            display: flex;
            justify-content: space-around;
            background: #faf0db;
            border-radius: 80px 8px 80px 8px;
            padding: 8px 4px;
            margin-bottom: 20px;
            border: 2px solid #b28f54;
            flex-wrap: wrap;
        }
        .icon-strip-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.75rem;
            color: #1f4a1f;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
            margin: 2px 0;
            cursor: pointer;
        }
        .icon-strip-item i {
            font-size: 1.8rem;
            background: #1b562b;
            color: #ffde91;
            border-radius: 50%;
            padding: 8px;
            width: 45px;
            height: 45px;
            text-align: center;
            line-height: 1.4;
            margin-bottom: 4px;
            border: 2px solid #ffcd7e;
            transition: 0.3s;
        }
        .icon-strip-item:hover i {
            transform: scale(1.1);
            background: #256635;
        }

        /* ÛÛŒÚˆØ± */
        .header-pak {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(130deg, #0f4820, #236b31);
            color: #f9efcf;
            padding: 12px 18px;
            border-radius: 50px 8px 50px 8px;
            border: 2px solid #facb7b;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .hilal-pak {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.5rem;
        }
        .urdu-text {
            font-size: 1.3rem;
            font-weight: 600;
            background: #00000020;
            padding: 5px 18px;
            border-radius: 40px;
        }

        /* Ù„Ø§Ø¦ÛŒÙˆ Ù¹Ø§Ø¦Ù…Ø± */
        .live-timer-badge {
            background: #1d4d2b;
            border: 2px solid #ffd58c;
            border-radius: 60px;
            padding: 16px 14px;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            color: #fef4cf;
            box-shadow: 0 5px 0 #0e3518;
        }
        .timer-block {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #0000002e;
            padding: 5px 15px;
            border-radius: 60px;
        }
        .timer-label {
            font-size: 1rem;
        }
        .timer-value {
            font-size: 1.5rem;
            font-weight: 700;
            direction: ltr;
            background: #243d19;
            padding: 4px 12px;
            border-radius: 40px;
        }
        .dua-tag {
            background: #b38d51;
            color: #212618;
            padding: 8px 15px;
            border-radius: 60px;
            font-size: 1rem;
            max-width: 300px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
            transition: 0.3s;
        }
        .dua-tag:hover {
            background: #c9a75a;
        }

        .card {
            background: #fcf2dfea;
            border-radius: 30px 8px 30px 8px;
            border: 1px solid #dbbc8b;
            padding: 18px 12px;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px -8px #7d684b;
        }
        .card-title {
            font-family: 'Amiri', serif;
            font-size: 1.9rem;
            color: #4f3a21;
            border-bottom: 2px dashed #bb9d70;
            padding-bottom: 10px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sehri-iftar-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }
        .sehri-iftar-table th {
            background: #8f6d45;
            color: white;
            padding: 10px 5px;
            font-weight: 500;
            border-radius: 20px 4px 10px 4px;
        }
        .sehri-iftar-table td {
            padding: 9px 4px;
            text-align: center;
            border-bottom: 1px solid #dac29c;
        }
        .sehri-iftar-table .today-row {
            background: #ffe9c7;
            font-weight: 700;
            border: 2px solid #b67c2e;
            border-radius: 30px;
        }
        .city-note {
            font-size: 0.9rem;
            background: #ebe1cd;
            padding: 8px 15px;
            border-radius: 30px;
            margin-top: 12px;
        }
        .city-note select {
            background: #5d482b;
            color: white;
            padding: 4px 8px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
        }

        .quran-urdu-box {
            background: #dacdb3;
            border-radius: 40px 6px 40px 6px;
            padding: 18px;
            margin: 12px 0;
            border: 2px solid #ad8f60;
            cursor: pointer;
            transition: 0.3s;
        }
        .quran-urdu-box:hover {
            background: #d2c09f;
        }
        .arabic-line {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            text-align: right;
            color: #1d451d;
            margin-bottom: 6px;
        }
        .urdu-translation {
            font-size: 1.2rem;
            color: #322a1b;
            border-right: 4px solid #aa7e4b;
            padding-right: 15px;
            margin: 8px 0;
        }
        .surah-detail {
            text-align: left;
            font-weight: 600;
            color: #5e462b;
        }

        .sponsor-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 18px 0;
        }
        .sponsor-card {
            background: linear-gradient(115deg, #a68452, #cfb185);
            border-radius: 30px 6px 30px 6px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 18px;
            border: 2px solid #fff1ca;
            color: #1d2b10;
            cursor: pointer;
            transition: 0.3s;
        }
        .sponsor-card:hover {
            transform: scale(1.02);
            filter: brightness(0.98);
        }
        .sponsor-card i {
            font-size: 2.2rem;
            background: #f7e9cf;
            width: 58px;
            height: 58px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7a582b;
        }
        .sponsor-text {
            font-weight: 600;
        }
        .sponsor-text small {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .footer-note {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            font-size: 0.85rem;
            color: #3f351f;
        }
        .btn {
            background: #2f6b3a;
            color: #fff2d4;
            border: none;
            border-radius: 60px;
            padding: 8px 22px;
            font-weight: 600;
            box-shadow: 0 4px 0 #154d1e;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn:hover {
            background: #3d824b;
        }
        .offline-tag {
            font-size: 0.75rem;
            text-align: center;
            margin-top: 20px;
            color: #7a6a4e;
        }
        
        /* Install Button */
        .install-container {
            position: sticky;
            top: 10px;
            z-index: 100;
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        .install-btn {
            background: #ffd966;
            color: #1a2e1a;
            border: 3px solid #c9a75a;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 0 #9b7a48;
            transition: 0.3s;
        }
        .install-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 0 #9b7a48;
        }
        
        /* PWA Badge */
        .pwa-badge {
            background: #4CAF50;
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            display: inline-block;
            margin-left: 5px;
        }
        
        /* Contact Buttons */
        .contact-btn {
            display: inline-block;
            background: #1e4a2e;
            color: white;
            padding: 5px 10px;
            border-radius: 30px;
            margin: 2px;
            font-size: 0.8rem;
            text-decoration: none;
            cursor: pointer;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }
        .modal-content {
            background: #faf3e2;
            border-radius: 45px 15px 45px 15px;
            padding: 25px;
            max-width: 500px;
            margin: 30px auto;
            border: 3px solid #c9a75a;
        }
        .close {
            float: left;
            font-size: 2rem;
            cursor: pointer;
            color: #1e4a2e;
        }
        .tasbeeh-display {
            font-size: 6rem;
            text-align: center;
            color: #1e4a2e;
            margin: 30px 0;
            font-weight: bold;
        }
        .tasbeeh-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .tas-btn {
            background: #1e4a2e;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            cursor: pointer;
            border: 2px solid #c9a75a;
        }
        .tas-btn.red {
            background: #8b3a3a;
        }
        .dua-box {
            background: #e7d8b8;
            border-radius: 30px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #c9a75a;
        }
        .dua-arabic {
            font-size: 1.8rem;
            font-family: 'Amiri', serif;
            text-align: right;
            color: #1e4a2e;
            margin-bottom: 10px;
        }
        .dua-urdu {
            font-size: 1.2rem;
            color: #1e3a1e;
            border-right: 3px solid #c9a75a;
            padding-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Install Button -->
    <div class="install-container" id="installContainer" style="display: none;">
        <button class="install-btn" id="installButton">
            <i class="fas fa-download"></i>
            Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº
        </button>
    </div>

<div class="app-wrapper">
    <div class="content" id="calendarContent">
        <!-- Dynamic Content will be loaded here -->
        <div style="text-align:center; padding:50px;">
            <i class="fas fa-spinner fa-spin" style="font-size:3rem; color:#1e4a2e;"></i>
            <p>Ù„ÙˆÚˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...</p>
        </div>
    </div>
</div>

<!-- Tasbeeh Modal -->
<div id="tasbeehModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('tasbeehModal')">&times;</span>
        <h2 style="text-align:center; color:#1e4a2e;">ğŸ“¿ ØªØ³Ø¨ÛŒØ­</h2>
        <div class="tasbeeh-display" id="tasbeehCount">0</div>
        <div class="tasbeeh-grid">
            <button class="tas-btn" onclick="addTasbeeh(1)">+1</button>
            <button class="tas-btn" onclick="addTasbeeh(33)">+33</button>
            <button class="tas-btn" onclick="addTasbeeh(100)">+100</button>
            <button class="tas-btn" onclick="saveTasbeeh()">Ù…Ø­ÙÙˆØ¸</button>
            <button class="tas-btn" onclick="loadTasbeeh()">Ù„ÙˆÚˆ</button>
            <button class="tas-btn red" onclick="resetTasbeeh()">Ø±ÛŒ Ø³ÛŒÙ¹</button>
        </div>
        <p style="text-align:center; margin-top:15px;">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Û Â· Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Û Â· Ø§Ù„Ù„Û Ø§Ú©Ø¨Ø±</p>
    </div>
</div>

<!-- Duas Modal -->
<div id="duasModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('duasModal')">&times;</span>
        <h2 style="text-align:center; color:#1e4a2e;">ğŸ¤² Ø±Ù…Ø¶Ø§Ù† Ú©ÛŒ Ø¯Ø¹Ø§Ø¦ÛŒÚº</h2>
        
        <div class="dua-box">
            <div class="dua-arabic">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ‡Ù’Ù„ÙÙ„Ù’Ù‡Ù Ø¹ÙÙ„ÙÙŠÙ’Ù†ÙØ§ Ø¨ÙØ§Ù„Ù’ÙŠÙÙ…Ù’Ù†Ù ÙˆÙØ§Ù„Ø¥ÙÙŠÙ…ÙØ§Ù†Ù</div>
            <div class="dua-urdu">Ø§Û’ Ø§Ù„Ù„Û! ÛÙ… Ù¾Ø± ÛŒÛ Ù…ÛÛŒÙ†Û Ø§Ù…Ù† Ùˆ Ø§ÛŒÙ…Ø§Ù† Ú©Û’ Ø³Ø§ØªÚ¾ Ø¯Ø§Ø®Ù„ ÙØ±Ù…Ø§</div>
        </div>
        
        <div class="dua-box">
            <div class="dua-arabic">Ø°ÙÙ‡ÙØ¨Ù Ø§Ù„Ø¸ÙÙ‘Ù…ÙØ£Ù ÙˆÙØ§Ø¨Ù’ØªÙÙ„ÙÙ‘ØªÙ Ø§Ù„Ù’Ø¹ÙØ±ÙÙˆÙ‚Ù ÙˆÙØ«ÙØ¨ÙØªÙ Ø§Ù„Ù’Ø£ÙØ¬Ù’Ø±Ù Ø¥ÙÙ†Ù’ Ø´ÙØ§Ø¡Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù</div>
            <div class="dua-urdu">Ù¾ÛŒØ§Ø³ Ø®ØªÙ… ÛÙˆ Ú¯Ø¦ÛŒØŒ Ø±Ú¯ÛŒÚº ØªØ± ÛÙˆ Ú¯Ø¦ÛŒÚº Ø§ÙˆØ± Ø§Ø¬Ø± Ø«Ø§Ø¨Øª ÛÙˆ Ú¯ÛŒØ§ØŒ Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Û (Ø§ÙØ·Ø§Ø±)</div>
        </div>
        
        <div class="dua-box">
            <div class="dua-arabic">ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ Ù…ÙÙ†Ù’ Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù</div>
            <div class="dua-urdu">Ù…ÛŒÚº Ù†Û’ Ú©Ù„ Ø±Ù…Ø¶Ø§Ù† Ú©Û’ Ø±ÙˆØ²Û’ Ú©ÛŒ Ù†ÛŒØª Ú©ÛŒ (Ø³Ø­Ø±ÛŒ)</div>
        </div>
        
        <div class="dua-box">
            <div class="dua-arabic">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø¨ÙØ±ÙØ­Ù’Ù…ÙØªÙÙƒÙ Ø§Ù„ÙÙ‘ØªÙÙŠ ÙˆÙØ³ÙØ¹ÙØªÙ’ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù</div>
            <div class="dua-urdu">Ø§Û’ Ø§Ù„Ù„Û! Ù…ÛŒÚº ØªØ¬Ú¾ Ø³Û’ ØªÛŒØ±ÛŒ Ø±Ø­Ù…Øª Ú©Û’ ÙˆØ³ÛŒÙ„Û’ Ø³Û’ Ù…Ø§Ù†Ú¯ØªØ§ ÛÙˆÚº</div>
        </div>
    </div>
</div>

<script>
    // ========== PWA INSTALLATION ==========
    let deferredPrompt;
    const installContainer = document.getElementById('installContainer');
    const installButton = document.getElementById('installButton');
    
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installContainer.style.display = 'flex';
    });
    
    installButton.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') installContainer.style.display = 'none';
        deferredPrompt = null;
    });
    
    window.addEventListener('appinstalled', () => {
        installContainer.style.display = 'none';
    });

    // ========== UNIVERSAL LINK OPENER ==========
    function openLink(url) {
        if (!url || url === '#' || url === '') return;
        
        // Create anchor element and click
        const link = document.createElement('a');
        link.href = url;
        link.target = '_blank';
        link.rel = 'noopener noreferrer';
        link.style.display = 'none';
        document.body.appendChild(link);
        link.click();
        setTimeout(() => {
            document.body.removeChild(link);
        }, 100);
    }

    // ========== CITY TIMINGS ==========
    const cityTimings = {
        lahore: [
            {day:1, date:"19 Feb", sehri:"5:18", iftar:"5:54"}, {day:2, date:"20 Feb", sehri:"5:17", iftar:"5:55"},
            {day:3, date:"21 Feb", sehri:"5:16", iftar:"5:56"}, {day:4, date:"22 Feb", sehri:"5:15", iftar:"5:57"},
            {day:5, date:"23 Feb", sehri:"5:14", iftar:"5:58"}, {day:6, date:"24 Feb", sehri:"5:12", iftar:"5:58"},
            {day:7, date:"25 Feb", sehri:"5:11", iftar:"5:59"}, {day:8, date:"26 Feb", sehri:"5:10", iftar:"6:00"},
            {day:9, date:"27 Feb", sehri:"5:09", iftar:"6:01"}, {day:10, date:"28 Feb", sehri:"5:08", iftar:"6:01"},
            {day:11, date:"1 Mar", sehri:"5:07", iftar:"6:02"}, {day:12, date:"2 Mar", sehri:"5:06", iftar:"6:03"},
            {day:13, date:"3 Mar", sehri:"5:05", iftar:"6:04"}, {day:14, date:"4 Mar", sehri:"5:04", iftar:"6:04"},
            {day:15, date:"5 Mar", sehri:"5:03", iftar:"6:05"}, {day:16, date:"6 Mar", sehri:"5:01", iftar:"6:06"},
            {day:17, date:"7 Mar", sehri:"5:00", iftar:"6:07"}, {day:18, date:"8 Mar", sehri:"4:59", iftar:"6:07"},
            {day:19, date:"9 Mar", sehri:"4:58", iftar:"6:08"}, {day:20, date:"10 Mar", sehri:"4:56", iftar:"6:09"},
            {day:21, date:"11 Mar", sehri:"4:55", iftar:"6:09"}, {day:22, date:"12 Mar", sehri:"4:54", iftar:"6:10"},
            {day:23, date:"13 Mar", sehri:"4:53", iftar:"6:11"}, {day:24, date:"14 Mar", sehri:"4:51", iftar:"6:12"},
            {day:25, date:"15 Mar", sehri:"4:50", iftar:"6:12"}, {day:26, date:"16 Mar", sehri:"4:49", iftar:"6:13"},
            {day:27, date:"17 Mar", sehri:"4:47", iftar:"6:14"}, {day:28, date:"18 Mar", sehri:"4:46", iftar:"6:14"},
            {day:29, date:"19 Mar", sehri:"4:45", iftar:"6:15"}, {day:30, date:"20 Mar", sehri:"4:44", iftar:"6:16"}
        ],
        karachi: [
            {day:1, date:"19 Feb", sehri:"5:52", iftar:"6:23"}, {day:2, date:"20 Feb", sehri:"5:51", iftar:"6:24"},
            {day:3, date:"21 Feb", sehri:"5:50", iftar:"6:24"}, {day:4, date:"22 Feb", sehri:"5:49", iftar:"6:25"},
            {day:5, date:"23 Feb", sehri:"5:48", iftar:"6:25"}, {day:6, date:"24 Feb", sehri:"5:47", iftar:"6:26"},
            {day:7, date:"25 Feb", sehri:"5:46", iftar:"6:27"}, {day:8, date:"26 Feb", sehri:"5:45", iftar:"6:27"},
            {day:9, date:"27 Feb", sehri:"5:44", iftar:"6:28"}, {day:10, date:"28 Feb", sehri:"5:43", iftar:"6:28"},
            {day:11, date:"1 Mar", sehri:"5:42", iftar:"6:29"}, {day:12, date:"2 Mar", sehri:"5:41", iftar:"6:30"},
            {day:13, date:"3 Mar", sehri:"5:40", iftar:"6:30"}, {day:14, date:"4 Mar", sehri:"5:39", iftar:"6:31"},
            {day:15, date:"5 Mar", sehri:"5:38", iftar:"6:31"}, {day:16, date:"6 Mar", sehri:"5:37", iftar:"6:32"},
            {day:17, date:"7 Mar", sehri:"5:36", iftar:"6:32"}, {day:18, date:"8 Mar", sehri:"5:35", iftar:"6:33"},
            {day:19, date:"9 Mar", sehri:"5:34", iftar:"6:34"}, {day:20, date:"10 Mar", sehri:"5:33", iftar:"6:34"},
            {day:21, date:"11 Mar", sehri:"5:32", iftar:"6:35"}, {day:22, date:"12 Mar", sehri:"5:31", iftar:"6:35"},
            {day:23, date:"13 Mar", sehri:"5:30", iftar:"6:36"}, {day:24, date:"14 Mar", sehri:"5:29", iftar:"6:36"},
            {day:25, date:"15 Mar", sehri:"5:28", iftar:"6:37"}, {day:26, date:"16 Mar", sehri:"5:27", iftar:"6:38"},
            {day:27, date:"17 Mar", sehri:"5:26", iftar:"6:38"}, {day:28, date:"18 Mar", sehri:"5:25", iftar:"6:39"},
            {day:29, date:"19 Mar", sehri:"5:24", iftar:"6:39"}, {day:30, date:"20 Mar", sehri:"5:23", iftar:"6:40"}
        ]
    };
    
    // Fill other cities
    cityTimings.islamabad = cityTimings.lahore.map(r => ({...r, sehri: (parseInt(r.sehri)+1)+':'+r.sehri.split(':')[1]}));
    cityTimings.multan = cityTimings.lahore.map(r => ({...r, iftar: (parseInt(r.iftar)+1)+':'+r.iftar.split(':')[1]}));
    cityTimings.faisalabad = cityTimings.lahore.map(r => ({...r, sehri: r.sehri, iftar: (parseInt(r.iftar)+1)+':'+r.iftar.split(':')[1]}));
    
    // ========== GLOBAL VARIABLES ==========
    let tasbeeh = parseInt(localStorage.getItem('tasbeeh')) || 0;
    let currentCity = 'lahore';
    
    // ========== LOAD CALENDAR DATA ==========
    function loadCalendar() {
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        
        let data = null;
        if (id && localStorage.getItem(id)) {
            data = JSON.parse(localStorage.getItem(id));
        } else {
            // Default data
            data = {
                businessName: "Ø§Ù„Ù…Ø¯ÛŒÙ†Û Ø¬Ù†Ø±Ù„ Ø³Ù¹ÙˆØ±",
                phoneNumber: "0300 1234567",
                businessType: "Ø¬Ù†Ø±Ù„ Ø³Ù¹ÙˆØ±",
                address: "Ú¯Ú¾Ø± Ù†Ù…Ø¨Ø± 12ØŒ Ù…Ø§ÚˆÙ„ Ù¹Ø§Ø¤Ù†ØŒ Ù„Ø§ÛÙˆØ±",
                
                ad1Text: "Ø­Ù„Ø§Ù„ ÙÙˆÚˆ",
                ad1Link: "https://www.foodpanda.pk",
                
                ad2Text: "Ø¹ÛŒØ¯ Ú©Ù„Ú©Ø´Ù†",
                ad2Link: "https://www.daraz.pk",
                
                ad3Text: "Ù…Ø¯ÛŒÙ†Û ÚˆÛŒÙ¹Ø³",
                ad3Link: "https://www.google.com/search?q=Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ+Ú©Ú¾Ø¬ÙˆØ±",
                
                banner1Text: "Ø®ØµÙˆØµÛŒ Ú©Ú¾Ø¬ÙˆØ± - 30% ØªØ®ÙÛŒÙ",
                banner1Link: "https://www.chaayee.pk/",
                
                banner2Text: "Ø­Ù„Ø§Ù„ ÙÙˆÚˆ - Ø§ÙØ·Ø§Ø± ÚˆÛŒÙ„",
                banner2Link: "https://www.kababjees.com/",
                
                banner3Text: "Ø±Ù…Ø¶Ø§Ù† Ø³Ù¾ÛŒØ´Ù„ Ù¾ÛŒÚ©Ø¬",
                banner3Link: "https://www.metro.pk/"
            };
        }
        
        renderCalendar(data);
    }
    
    // ========== RENDER CALENDAR ==========
    function renderCalendar(data) {
        const today = new Date();
        const ramadanStart = new Date(2026, 1, 19);
        let fastNumber = 0;
        if (today >= ramadanStart) {
            fastNumber = Math.floor((today - ramadanStart) / (1000*3600*24)) + 1;
        }
        
        // Render table
        function renderTable(city) {
            let dataTable = cityTimings[city] || cityTimings.lahore;
            let tbody = '';
            for(let i=0; i<dataTable.length; i++) {
                let row = dataTable[i];
                let cls = (fastNumber === row.day) ? 'today-row' : '';
                tbody += `<tr class="${cls}"><td>${row.day}</td><td>${row.date}</td><td>${row.sehri} AM</td><td>${row.iftar} PM</td></tr>`;
            }
            return tbody;
        }
        
        function changeCity(city) {
            currentCity = city;
            document.getElementById('tableBody').innerHTML = renderTable(city);
            document.getElementById('cityNameDisplay').innerText = city === 'lahore' ? 'Ù„Ø§ÛÙˆØ±' : city === 'karachi' ? 'Ú©Ø±Ø§Ú†ÛŒ' : city === 'islamabad' ? 'Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯' : city === 'multan' ? 'Ù…Ù„ØªØ§Ù†' : 'ÙÛŒØµÙ„ Ø¢Ø¨Ø§Ø¯';
        }
        
        const html = `
            <!-- Ø§Ø³Ù¾Ø§Ù†Ø³Ø± Ø­ØµÛ -->
            <div class="sponsor-pro-row" onclick="openLink('https://maps.google.com/?q=${encodeURIComponent(data.address)}')">
                <div class="shop-info">
                    <div class="shop-name">${data.businessName}</div>
                    <div class="shop-details">
                        <i class="fas fa-map-marker-alt"></i> ${data.address}<br>
                        <span class="contact-btn" onclick="event.stopPropagation(); openLink('tel:${data.phoneNumber}')"><i class="fas fa-phone"></i> ${data.phoneNumber}</span>
                    </div>
                    <div style="background:#ffd58c; border-radius:40px; padding:5px 15px; display:inline-block; margin-top:6px; color:#1f401f;">
                        <i class="fas fa-tags"></i> ${data.businessType}
                    </div>
                </div>
                <div class="shop-image">
                    <i class="fas fa-store"></i>
                </div>
            </div>

            <!-- Ø¢Ø¦ÛŒÚ©ÙˆÙ†Ø² Ú©ÛŒ Ù‚Ø·Ø§Ø± -->
            <div class="icon-strip">
                <div class="icon-strip-item" onclick="openTasbeeh()">
                    <i class="fas fa-tasbih"></i> <span>ØªØ³Ø¨ÛŒØ­</span>
                </div>
                <div class="icon-strip-item" onclick="openLink('https://www.dawateislami.net/Book/Download/337/ramadan-ki-40-duaen-urdu-pdf')">
                    <i class="fas fa-file-pdf"></i> <span>Ù‚Ø±Ø¢Ù† PDF</span>
                </div>
                <div class="icon-strip-item" onclick="openLink('https://download.quranicaudio.com/quran/mishari_al_afasi/001.mp3')">
                    <i class="fas fa-headphones"></i> <span>Ù‚Ø±Ø¢Ù† Ø¢ÚˆÛŒÙˆ</span>
                </div>
                <div class="icon-strip-item" onclick="openDuas()">
                    <i class="fas fa-hand-praying"></i> <span>Ø¯Ø¹Ø§Ø¦ÛŒÚº</span>
                </div>
                <div class="icon-strip-item" onclick="openLink('https://www.google.com/maps/search/Qibla+Direction+Pakistan')">
                    <i class="fas fa-kaaba"></i> <span>Ù‚Ø¨Ù„Û Ø³Ù…Øª</span>
                </div>
            </div>

            <!-- ÛÛŒÚˆØ± -->
            <div class="header-pak">
                <div class="hilal-pak"><i class="fas fa-moon" style="color: #f9d47a;"></i> <span id="cityNameDisplay">Ù„Ø§ÛÙˆØ±</span></div>
                <div class="urdu-text" id="hijriUrdu">Ø±Ù…Ø¶Ø§Ù† 1447 Ú¾</div>
            </div>

            <!-- Ù„Ø§Ø¦ÛŒÙˆ Ù¹Ø§Ø¦Ù…Ø± -->
            <div class="live-timer-badge" id="liveTimerSection">
                <div class="timer-block" id="countdownSehriArea">
                    <i class="fas fa-utensils"></i>
                    <span class="timer-label">Ø³Ø­Ø±ÛŒ Ù…ÛŒÚº</span>
                    <span class="timer-value" id="timerValue">--:--:--</span>
                </div>
                <div class="timer-block" id="countdownIftarArea">
                    <i class="fas fa-sun"></i>
                    <span class="timer-label">Ø§ÙØ·Ø§Ø±ÛŒ Ù…ÛŒÚº</span>
                    <span class="timer-value" id="iftarTimerValue">--:--:--</span>
                </div>
                <div class="dua-tag" id="duaDisplay" onclick="openDuas()">Ø¯Ø¹Ø§ Ø³Ø­Ø±ÛŒ: ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ</div>
            </div>

            <!-- Ø³Ø­Ø±ÛŒ Ùˆ Ø§ÙØ·Ø§Ø±ÛŒ Ù¹ÛŒØ¨Ù„ -->
            <div class="card">
                <div class="card-title"><i class="fas fa-clock"></i> Ø³Ø­Ø±ÛŒ Ùˆ Ø§ÙØ·Ø§Ø±ÛŒ  Â·  Ø±Ù…Ø¶Ø§Ù† 2026</div>
                <table class="sehri-iftar-table" id="ramadanTable">
                    <thead><tr><th>Ø±ÙˆØ²Û</th><th>ØªØ§Ø±ÛŒØ®</th><th>Ø³Ø­Ø±ÛŒ</th><th>Ø§ÙØ·Ø§Ø±ÛŒ</th></tr></thead>
                    <tbody id="tableBody">${renderTable('lahore')}</tbody>
                </table>
                <div class="city-note">
                    <i class="fas fa-map-marker-alt"></i> <span id="citySelectLabel">Ù„Ø§ÛÙˆØ±</span> Â· 
                    <select id="citySelect" onchange="changeCity(this.value)">
                        <option value="lahore" selected>Ù„Ø§ÛÙˆØ±</option>
                        <option value="karachi">Ú©Ø±Ø§Ú†ÛŒ</option>
                        <option value="islamabad">Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯</option>
                        <option value="multan">Ù…Ù„ØªØ§Ù†</option>
                        <option value="faisalabad">ÙÛŒØµÙ„ Ø¢Ø¨Ø§Ø¯</option>
                    </select>
                    <span style="float:right;"> <i class="fas fa-mosque"></i> </span>
                </div>
            </div>

            <!-- Ù‚Ø±Ø¢Ù† Ù…Ø¬ÛŒØ¯ -->
            <div class="quran-urdu-box" onclick="openLink('https://quran.com/ur')">
                <div class="arabic-line">Ø¥ÙÙ†ÙÙ‘Ø§ Ø£ÙÙ†Ø²ÙÙ„Ù’Ù†ÙØ§Ù‡Ù ÙÙÙŠ Ù„ÙÙŠÙ’Ù„ÙØ©Ù Ø§Ù„Ù’Ù‚ÙØ¯Ù’Ø±Ù</div>
                <div class="urdu-translation">Ø¨Û’ Ø´Ú© ÛÙ… Ù†Û’ Ø§Ø³ (Ù‚Ø±Ø¢Ù†) Ú©Ùˆ Ø´Ø¨ Ù‚Ø¯Ø± Ù…ÛŒÚº Ù†Ø§Ø²Ù„ Ú©ÛŒØ§Û”</div>
                <div class="arabic-line" style="font-size:1.8rem;">ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ ÙƒÙØªÙØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù Ø§Ù„ØµÙÙ‘ÙŠÙØ§Ù…Ù</div>
                <div class="urdu-translation">Ø§Û’ Ø§ÛŒÙ…Ø§Ù† ÙˆØ§Ù„Ùˆ! ØªÙ… Ù¾Ø± Ø±ÙˆØ²Û’ ÙØ±Ø¶ Ú©ÛŒÛ’ Ú¯Ø¦Û’Û” (Ø§Ù„Ø¨Ù‚Ø±Ø©: 183)</div>
                <div class="surah-detail">Ù…Ú©Ù…Ù„ Ù‚Ø±Ø¢Ù† Ú©Û’ Ù„ÛŒÛ’ Ú©Ù„Ú© Ú©Ø±ÛŒÚº</div>
            </div>

            <!-- Ø§Ø³Ù¾Ø§Ù†Ø³Ø± Ø¨ÛŒÙ†Ø±Ø² -->
            <div class="sponsor-grid">
                <div class="sponsor-card" onclick="openLink('${data.ad1Link}')">
                    <i class="fas fa-utensils"></i>
                    <div class="sponsor-text"><strong>${data.ad1Text}</strong> <br> <small>Ø®ØµÙˆØµÛŒ Ø±Ù…Ø¶Ø§Ù† Ø¢ÙØ±</small></div>
                </div>
                <div class="sponsor-card" onclick="openLink('${data.ad2Link}')">
                    <i class="fas fa-tshirt"></i>
                    <div class="sponsor-text"><strong>${data.ad2Text}</strong> <br> <small>Ø¹ÛŒØ¯ Ú©Ù„Ú©Ø´Ù† 2026</small></div>
                </div>
                <div class="sponsor-card" onclick="openLink('${data.ad3Link}')">
                    <i class="fas fa-dates"></i>
                    <div class="sponsor-text"><strong>${data.ad3Text}</strong> <br> <small>Ø®Ø§Ù„Øµ Ú©Ú¾Ø¬ÙˆØ±</small></div>
                </div>
            </div>

            <!-- Ø§Ø¶Ø§ÙÛŒ Ø¨Ù¹Ù† -->
            <div style="display:flex; flex-wrap:wrap; gap:8px; justify-content:center; margin:10px 0;">
                <span class="btn" onclick="openDuas()"><i class="fas fa-pray"></i> Ø¯Ø±ÙˆØ¯ Ø´Ø±ÛŒÙ</span>
                <span class="btn" onclick="openLink('https://quran.com/ur')"><i class="fas fa-quran"></i> ØªÙ„Ø§ÙˆØª</span>
                <span class="btn" onclick="openLink('https://www.islamicfinder.org/prayer-widget/')"><i class="fas fa-clock"></i> ØªØ±Ø§ÙˆÛŒØ­</span>
            </div>

            <!-- Bottom Banners -->
            <div class="bottom-banners">
                <div class="sponsor-card" onclick="openLink('${data.banner1Link}')">
                    <i class="fas fa-dates"></i>
                    <div class="sponsor-text"><strong>${data.banner1Text}</strong> <br> <small>Ú¯Ú¾Ø± Ø¨ÛŒÙ¹Ú¾Û’ Ù…Ù†Ú¯Ø§Ø¦ÛŒÚº</small></div>
                </div>
                <div class="sponsor-card" onclick="openLink('${data.banner2Link}')">
                    <i class="fas fa-drumstick-bite"></i>
                    <div class="sponsor-text"><strong>${data.banner2Text}</strong> <br> <small>Ø¨ÙˆÙÛ’ Ù¾Ø± Ø®ØµÙˆØµÛŒ Ø±Ø¹Ø§ÛŒØª</small></div>
                </div>
                <div class="sponsor-card" onclick="openLink('${data.banner3Link}')">
                    <i class="fas fa-gift"></i>
                    <div class="sponsor-text"><strong>${data.banner3Text}</strong> <br> <small>Ø±Ù…Ø¶Ø§Ù† Ø³Ù¾ÛŒØ´Ù„</small></div>
                </div>
            </div>

            <div class="footer-note">
                <span><i class="fas fa-moon"></i> Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ú© 1447 Ú¾</span>
                <span><i class="fas fa-calendar-week"></i> 19 ÙØ±ÙˆØ±ÛŒ ØªØ§ 20 Ù…Ø§Ø±Ú† 2026Ø¡</span>
            </div>
            <div class="offline-tag">
                <i class="fas fa-download"></i> ØªÙ…Ø§Ù… Ù…ÙˆØ§Ø¯ Ø¢Ù Ù„Ø§Ø¦Ù† â€¢ Ù„Ø§Ø¦ÛŒÙˆ Ù¹Ø§Ø¦Ù…Ø± Ø®ÙˆØ¯Ú©Ø§Ø± <span class="pwa-badge">PWA</span>
            </div>
        `;
        
        document.getElementById('calendarContent').innerHTML = html;
        
        // Attach changeCity function to window
        window.changeCity = function(city) {
            currentCity = city;
            document.getElementById('tableBody').innerHTML = renderTable(city);
            document.getElementById('cityNameDisplay').innerText = city === 'lahore' ? 'Ù„Ø§ÛÙˆØ±' : city === 'karachi' ? 'Ú©Ø±Ø§Ú†ÛŒ' : city === 'islamabad' ? 'Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯' : city === 'multan' ? 'Ù…Ù„ØªØ§Ù†' : 'ÙÛŒØµÙ„ Ø¢Ø¨Ø§Ø¯';
        };
        
        // Start timer
        updateTimer();
        setInterval(updateTimer, 1000);
    }
    
    // ========== TIMER FUNCTIONS ==========
    function updateTimer() {
        let now = new Date();
        let data = cityTimings[currentCity] || cityTimings.lahore;
        let ramadanStart = new Date(2026, 1, 19);
        let fastNum = Math.floor((now - ramadanStart) / (1000*60*60*24)) + 1;
        if (fastNum < 1 || fastNum > 30) fastNum = 1;
        
        let timings = data[fastNum-1] || data[0];
        if (!timings) return;
        
        let [sehriH, sehriM] = timings.sehri.split(':').map(Number);
        let [iftarH, iftarM] = timings.iftar.split(':').map(Number);
        
        let sehriTime = new Date(now);
        sehriTime.setHours(sehriH, sehriM, 0);
        let iftarTime = new Date(now);
        iftarTime.setHours(iftarH, iftarM, 0);
        
        let nextSehri = new Date(sehriTime);
        if (now > sehriTime) nextSehri.setDate(nextSehri.getDate() + 1);
        let nextIftar = new Date(iftarTime);
        if (now > iftarTime) nextIftar.setDate(nextIftar.getDate() + 1);
        
        let diffSehri = Math.max(0, nextSehri - now);
        let diffIftar = Math.max(0, nextIftar - now);
        
        let sehriHours = Math.floor(diffSehri / (1000*60*60));
        let sehriMins = Math.floor((diffSehri % (1000*60*60)) / (1000*60));
        let sehriSecs = Math.floor((diffSehri % (1000*60)) / 1000);
        let iftarHours = Math.floor(diffIftar / (1000*60*60));
        let iftarMins = Math.floor((diffIftar % (1000*60*60)) / (1000*60));
        let iftarSecs = Math.floor((diffIftar % (1000*60)) / 1000);
        
        let timerEl = document.getElementById('timerValue');
        let iftarEl = document.getElementById('iftarTimerValue');
        let duaEl = document.getElementById('duaDisplay');
        
        if (timerEl) timerEl.innerText = `${String(sehriHours).padStart(2,'0')}:${String(sehriMins).padStart(2,'0')}:${String(sehriSecs).padStart(2,'0')}`;
        if (iftarEl) iftarEl.innerText = `${String(iftarHours).padStart(2,'0')}:${String(iftarMins).padStart(2,'0')}:${String(iftarSecs).padStart(2,'0')}`;
        
        if (duaEl) {
            if (now < iftarTime && now > sehriTime) {
                duaEl.innerText = "Ø¯Ø¹Ø§Ø¦Û’ Ø§ÙØ·Ø§Ø±: Ø°ÙÙ‡ÙØ¨Ù Ø§Ù„Ø¸ÙÙ‘Ù…ÙØ£Ù ÙˆÙØ§Ø¨Ù’ØªÙÙ„ÙÙ‘ØªÙ Ø§Ù„Ù’Ø¹ÙØ±ÙÙˆÙ‚Ù";
            } else {
                duaEl.innerText = "Ø¯Ø¹Ø§Ø¦Û’ Ø³Ø­Ø±ÛŒ: ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ";
            }
        }
    }
    
    // ========== MODAL FUNCTIONS ==========
    function openTasbeeh() { document.getElementById('tasbeehModal').style.display = 'block'; }
    function openDuas() { document.getElementById('duasModal').style.display = 'block'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    
    function addTasbeeh(val) { tasbeeh += val; document.getElementById('tasbeehCount').innerText = tasbeeh; }
    function resetTasbeeh() { tasbeeh = 0; document.getElementById('tasbeehCount').innerText = tasbeeh; }
    function saveTasbeeh() { localStorage.setItem('tasbeeh', tasbeeh); alert('Ù…Ø­ÙÙˆØ¸ ÛÙˆ Ú¯ÛŒØ§: ' + tasbeeh); }
    function loadTasbeeh() { 
        let saved = localStorage.getItem('tasbeeh');
        if (saved) { tasbeeh = parseInt(saved); document.getElementById('tasbeehCount').innerText = tasbeeh; }
    }
    
    window.onclick = function(e) {
        if (e.target.classList.contains('modal')) e.target.style.display = 'none';
    };
    
    // Initialize
    loadCalendar();
    document.getElementById('tasbeehCount').innerText = tasbeeh;
</script>
</body>
</html>
