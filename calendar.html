<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Ramadan Calendar 2026</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='45' fill='%231a2e1a'/><text x='50' y='70' font-size='50' text-anchor='middle' fill='%23ffd966' font-family='Arial'>ğŸŒ™</text></svg>">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#1a2e1a">
    
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', 'Amiri', sans-serif;
            background: #1a2e1a;
            padding: 10px;
            min-height: 100vh;
        }
        
        .install-container {
            position: sticky;
            top: 10px;
            z-index: 100;
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .install-btn {
            background: #ffd966;
            color: #1a2e1a;
            border: 3px solid #c9a75a;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 0 #9b7a48;
            transition: 0.3s;
        }
        
        .app-wrapper {
            max-width: 600px;
            margin: 0 auto;
            background: #faf3e2;
            border-radius: 50px 15px 50px 15px;
            padding: 18px 15px 25px;
            border: 3px solid #c9a75a;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }
        
        /* Profile Card */
        .profile-card {
            background: white;
            border-radius: 40px 8px 40px 8px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid #b38d5a;
            box-shadow: 0 5px 0 #9b7a48;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .profile-pic {
            width: 80px;
            height: 80px;
            background: #1e4a2e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffd966;
            font-size: 2.5rem;
            overflow: hidden;
            border: 3px solid #c9a75a;
        }
        
        .profile-pic img { width: 100%; height: 100%; object-fit: cover; }
        
        .profile-info { flex: 1; }
        .profile-name {
            font-size: 2rem;
            font-weight: 800;
            color: #1e4a2e;
            font-family: 'Amiri', serif;
        }
        
        .profile-detail {
            color: #4a5a4a;
            margin: 5px 0;
            font-size: 0.95rem;
        }
        
        .contact-badge {
            display: inline-block;
            background: #1e4a2e;
            color: white;
            padding: 5px 12px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 0.85rem;
            margin: 2px;
            border: 1px solid #c9a75a;
            cursor: pointer;
        }
        
        .contact-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .contact-icon-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #1e4a2e;
            color: white;
            padding: 8px 16px;
            border-radius: 40px;
            text-decoration: none;
            font-size: 0.9rem;
            border: 1px solid #c9a75a;
            cursor: pointer;
        }
        
        .contact-icon-btn i {
            font-size: 1.2rem;
            color: #ffd966;
        }
        
        /* City Selector */
        .city-selector {
            background: #e7d8b8;
            border-radius: 40px;
            padding: 10px 15px;
            margin-bottom: 15px;
            border: 2px solid #c9a75a;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .city-selector select {
            flex: 1;
            padding: 10px;
            border: 2px solid #c9a75a;
            border-radius: 30px;
            background: white;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            color: #1e4a2e;
            font-weight: 600;
        }
        
        .city-selector i {
            color: #1e4a2e;
            font-size: 1.3rem;
        }
        
        /* Ramadan Header */
        .ramadan-header {
            background: linear-gradient(135deg, #1e4a2e, #0f3a1f);
            border-radius: 40px 8px 40px 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 2px solid #c9a75a;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }
        
        .ramadan-header h2 {
            font-size: 2rem;
            color: #ffd966;
            font-family: 'Amiri', serif;
        }
        
        /* Icons Row */
        .icon-row {
            display: flex;
            justify-content: space-around;
            background: #e7d8b8;
            border-radius: 80px 8px 80px 8px;
            padding: 15px 5px;
            margin-bottom: 15px;
            border: 2px solid #c9a75a;
            flex-wrap: wrap;
        }
        
        .icon-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #1e4a2e;
            font-weight: 600;
            cursor: pointer;
            min-width: 70px;
        }
        
        .icon-item i {
            font-size: 2rem;
            background: #1e4a2e;
            color: #ffd966;
            border-radius: 50%;
            padding: 12px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            border: 2px solid #c9a75a;
        }
        
        /* Live Timer */
        .live-timer {
            background: #1e4a2e;
            border: 2px solid #ffd966;
            border-radius: 60px;
            padding: 15px;
            margin-bottom: 15px;
            color: white;
        }
        
        .timer-row {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .timer-block {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #0f3a1f;
            padding: 8px 15px;
            border-radius: 40px;
        }
        
        .timer-value {
            font-size: 1.3rem;
            font-weight: 700;
            background: #1e4a2e;
            padding: 4px 12px;
            border-radius: 30px;
            border: 1px solid #ffd966;
        }
        
        .dua-ticker {
            background: #b38d51;
            color: #1e3a1e;
            padding: 10px 15px;
            border-radius: 40px;
            text-align: center;
            margin-top: 10px;
            cursor: pointer;
        }
        
        /* Quran Box */
        .quran-box {
            background: linear-gradient(145deg, #1e4a2e, #0f3a1f);
            border-radius: 40px 8px 40px 8px;
            padding: 20px 15px;
            margin-bottom: 15px;
            border: 3px solid #c9a75a;
            cursor: pointer;
            text-align: center;
        }
        
        .quran-box i { font-size: 3.5rem; color: #ffd966; }
        .quran-box h2 { color: #ffd966; font-size: 2rem; font-family: 'Amiri', serif; }
        
        /* Calendar Table */
        .calendar-container {
            background: #e7d8b8;
            border-radius: 30px 8px 30px 8px;
            padding: 15px;
            border: 2px solid #c9a75a;
            margin-bottom: 15px;
        }
        
        .calendar-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .calendar-table th {
            background: #1e4a2e;
            color: white;
            padding: 10px;
            border-radius: 20px 4px 10px 4px;
        }
        
        .calendar-table td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #c9a75a;
            color: #1e3a1e;
        }
        
        .today-row { background: #ffd966; font-weight: bold; }
        .table-scroll { max-height: 400px; overflow-y: auto; }
        
        .footer {
            text-align: center;
            color: #1e4a2e;
            font-size: 0.9rem;
            margin-top: 15px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }
        
        .modal-content {
            background: #faf3e2;
            border-radius: 50px 15px;
            padding: 25px;
            max-width: 500px;
            margin: 30px auto;
            border: 3px solid #c9a75a;
        }
        
        .close {
            float: left;
            font-size: 2rem;
            cursor: pointer;
            color: #1e4a2e;
        }
        
        .tasbeeh-display {
            font-size: 6rem;
            text-align: center;
            color: #1e4a2e;
            margin: 30px 0;
            font-weight: bold;
        }
        
        .tasbeeh-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .tas-btn {
            background: #1e4a2e;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            cursor: pointer;
            border: 2px solid #c9a75a;
        }
        
        .tas-btn.red { background: #8b3a3a; }
        
        .dua-box {
            background: #e7d8b8;
            border-radius: 30px;
            padding: 20px;
            margin: 15px 0;
            border: 2px solid #c9a75a;
        }
        
        .dua-arabic {
            font-size: 1.8rem;
            font-family: 'Amiri';
            text-align: right;
            color: #1e4a2e;
            margin-bottom: 10px;
        }
        
        .dua-urdu {
            font-size: 1.2rem;
            color: #1e3a1e;
            border-right: 3px solid #c9a75a;
            padding-right: 10px;
        }
    </style>
</head>
<body>
    <div class="install-container" id="installContainer" style="display: none;">
        <button class="install-btn" id="installButton">
            <i class="fas fa-download"></i>
            Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº
        </button>
    </div>
    
    <div class="app-wrapper">
        <div class="content" id="calendarContent">
            <div style="text-align:center; padding:50px;">
                <i class="fas fa-spinner fa-spin" style="font-size:3rem; color:#1e4a2e;"></i>
                <p>Ù„ÙˆÚˆ ÛÙˆ Ø±ÛØ§ ÛÛ’...</p>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div id="tasbeehModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('tasbeehModal')">&times;</span>
            <h2 style="text-align:center; color:#1e4a2e;">ğŸ“¿ ØªØ³Ø¨ÛŒØ­</h2>
            <div class="tasbeeh-display" id="tasbeehCount">0</div>
            <div class="tasbeeh-grid">
                <button class="tas-btn" onclick="addTasbeeh(1)">+1</button>
                <button class="tas-btn" onclick="addTasbeeh(33)">+33</button>
                <button class="tas-btn" onclick="addTasbeeh(100)">+100</button>
                <button class="tas-btn" onclick="saveTasbeeh()">Ù…Ø­ÙÙˆØ¸</button>
                <button class="tas-btn" onclick="loadTasbeeh()">Ù„ÙˆÚˆ</button>
                <button class="tas-btn red" onclick="resetTasbeeh()">Ø±ÛŒ Ø³ÛŒÙ¹</button>
            </div>
        </div>
    </div>
    
    <div id="duasModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('duasModal')">&times;</span>
            <h2 style="text-align:center; color:#1e4a2e;">ğŸ¤² Ø±Ù…Ø¶Ø§Ù† Ú©ÛŒ Ø¯Ø¹Ø§Ø¦ÛŒÚº</h2>
            <div class="dua-box">
                <div class="dua-arabic">Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ‡Ù’Ù„ÙÙ„Ù’Ù‡Ù Ø¹ÙÙ„ÙÙŠÙ’Ù†ÙØ§ Ø¨ÙØ§Ù„Ù’ÙŠÙÙ…Ù’Ù†Ù ÙˆÙØ§Ù„Ø¥ÙÙŠÙ…ÙØ§Ù†Ù</div>
                <div class="dua-urdu">Ø§Û’ Ø§Ù„Ù„Û! ÛÙ… Ù¾Ø± ÛŒÛ Ù…ÛÛŒÙ†Û Ø§Ù…Ù† Ø§ÙˆØ± Ø§ÛŒÙ…Ø§Ù† Ú©Û’ Ø³Ø§ØªÚ¾ Ø¯Ø§Ø®Ù„ ÙØ±Ù…Ø§</div>
            </div>
            <div class="dua-box">
                <div class="dua-arabic">Ø°ÙÙ‡ÙØ¨Ù Ø§Ù„Ø¸ÙÙ‘Ù…ÙØ£Ù ÙˆÙØ§Ø¨Ù’ØªÙÙ„ÙÙ‘ØªÙ Ø§Ù„Ù’Ø¹ÙØ±ÙÙˆÙ‚Ù</div>
                <div class="dua-urdu">Ù¾ÛŒØ§Ø³ Ø®ØªÙ… ÛÙˆ Ú¯Ø¦ÛŒØŒ Ø±Ú¯ÛŒÚº ØªØ± ÛÙˆ Ú¯Ø¦ÛŒÚº</div>
            </div>
            <div class="dua-box">
                <div class="dua-arabic">ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ</div>
                <div class="dua-urdu">Ù…ÛŒÚº Ù†Û’ Ú©Ù„ Ú©Û’ Ø±ÙˆØ²Û’ Ú©ÛŒ Ù†ÛŒØª Ú©ÛŒ</div>
            </div>
        </div>
    </div>
    
    <script>
        // ========== UNIVERSAL LINK OPENER - 100% WORKING ==========
        function openLink(url) {
            if (!url || url === '#' || url === '') return;
            
            // Create a temporary anchor element
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.style.display = 'none';
            
            // Add to body, click, remove
            document.body.appendChild(link);
            link.click();
            
            // Remove after a short delay
            setTimeout(() => {
                document.body.removeChild(link);
            }, 100);
        }

        // ========== PWA INSTALLATION ==========
        let deferredPrompt;
        const installContainer = document.getElementById('installContainer');
        const installButton = document.getElementById('installButton');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installContainer.style.display = 'flex';
        });
        
        installButton.addEventListener('click', async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === 'accepted') installContainer.style.display = 'none';
            deferredPrompt = null;
        });
        
        window.addEventListener('appinstalled', () => {
            installContainer.style.display = 'none';
        });
        
        // ========== CALENDAR DATA FOR DIFFERENT CITIES ==========
        const cityTimings = {
            lahore: [
                {day:1, date:"19 Feb", sehri:"5:18", iftar:"5:54"},
                {day:2, date:"20 Feb", sehri:"5:17", iftar:"5:55"},
                {day:3, date:"21 Feb", sehri:"5:16", iftar:"5:56"},
                {day:4, date:"22 Feb", sehri:"5:15", iftar:"5:57"},
                {day:5, date:"23 Feb", sehri:"5:14", iftar:"5:58"},
                {day:6, date:"24 Feb", sehri:"5:12", iftar:"5:58"},
                {day:7, date:"25 Feb", sehri:"5:11", iftar:"5:59"},
                {day:8, date:"26 Feb", sehri:"5:10", iftar:"6:00"},
                {day:9, date:"27 Feb", sehri:"5:09", iftar:"6:01"},
                {day:10, date:"28 Feb", sehri:"5:08", iftar:"6:01"},
                {day:11, date:"1 Mar", sehri:"5:07", iftar:"6:02"},
                {day:12, date:"2 Mar", sehri:"5:06", iftar:"6:03"},
                {day:13, date:"3 Mar", sehri:"5:05", iftar:"6:04"},
                {day:14, date:"4 Mar", sehri:"5:04", iftar:"6:04"},
                {day:15, date:"5 Mar", sehri:"5:03", iftar:"6:05"},
                {day:16, date:"6 Mar", sehri:"5:01", iftar:"6:06"},
                {day:17, date:"7 Mar", sehri:"5:00", iftar:"6:07"},
                {day:18, date:"8 Mar", sehri:"4:59", iftar:"6:07"},
                {day:19, date:"9 Mar", sehri:"4:58", iftar:"6:08"},
                {day:20, date:"10 Mar", sehri:"4:56", iftar:"6:09"},
                {day:21, date:"11 Mar", sehri:"4:55", iftar:"6:09"},
                {day:22, date:"12 Mar", sehri:"4:54", iftar:"6:10"},
                {day:23, date:"13 Mar", sehri:"4:53", iftar:"6:11"},
                {day:24, date:"14 Mar", sehri:"4:51", iftar:"6:12"},
                {day:25, date:"15 Mar", sehri:"4:50", iftar:"6:12"},
                {day:26, date:"16 Mar", sehri:"4:49", iftar:"6:13"},
                {day:27, date:"17 Mar", sehri:"4:47", iftar:"6:14"},
                {day:28, date:"18 Mar", sehri:"4:46", iftar:"6:14"},
                {day:29, date:"19 Mar", sehri:"4:45", iftar:"6:15"},
                {day:30, date:"20 Mar", sehri:"4:44", iftar:"6:16"}
            ],
            karachi: [
                {day:1, date:"19 Feb", sehri:"5:25", iftar:"6:01"},
                {day:2, date:"20 Feb", sehri:"5:24", iftar:"6:02"},
                {day:3, date:"21 Feb", sehri:"5:23", iftar:"6:03"},
                {day:4, date:"22 Feb", sehri:"5:22", iftar:"6:04"},
                {day:5, date:"23 Feb", sehri:"5:21", iftar:"6:04"},
                {day:6, date:"24 Feb", sehri:"5:20", iftar:"6:05"},
                {day:7, date:"25 Feb", sehri:"5:19", iftar:"6:06"},
                {day:8, date:"26 Feb", sehri:"5:18", iftar:"6:06"},
                {day:9, date:"27 Feb", sehri:"5:17", iftar:"6:07"},
                {day:10, date:"28 Feb", sehri:"5:16", iftar:"6:08"},
                {day:11, date:"1 Mar", sehri:"5:15", iftar:"6:08"},
                {day:12, date:"2 Mar", sehri:"5:14", iftar:"6:09"},
                {day:13, date:"3 Mar", sehri:"5:13", iftar:"6:10"},
                {day:14, date:"4 Mar", sehri:"5:11", iftar:"6:10"},
                {day:15, date:"5 Mar", sehri:"5:10", iftar:"6:11"},
                {day:16, date:"6 Mar", sehri:"5:09", iftar:"6:12"},
                {day:17, date:"7 Mar", sehri:"5:08", iftar:"6:12"},
                {day:18, date:"8 Mar", sehri:"5:07", iftar:"6:13"},
                {day:19, date:"9 Mar", sehri:"5:05", iftar:"6:13"},
                {day:20, date:"10 Mar", sehri:"5:04", iftar:"6:14"},
                {day:21, date:"11 Mar", sehri:"5:03", iftar:"6:15"},
                {day:22, date:"12 Mar", sehri:"5:02", iftar:"6:15"},
                {day:23, date:"13 Mar", sehri:"5:00", iftar:"6:16"},
                {day:24, date:"14 Mar", sehri:"4:59", iftar:"6:16"},
                {day:25, date:"15 Mar", sehri:"4:58", iftar:"6:17"},
                {day:26, date:"16 Mar", sehri:"4:57", iftar:"6:18"},
                {day:27, date:"17 Mar", sehri:"4:55", iftar:"6:18"},
                {day:28, date:"18 Mar", sehri:"4:54", iftar:"6:19"},
                {day:29, date:"19 Mar", sehri:"4:53", iftar:"6:19"},
                {day:30, date:"20 Mar", sehri:"4:52", iftar:"6:20"}
            ],
            islamabad: [
                {day:1, date:"19 Feb", sehri:"5:12", iftar:"5:48"},
                {day:2, date:"20 Feb", sehri:"5:11", iftar:"5:49"},
                {day:3, date:"21 Feb", sehri:"5:10", iftar:"5:50"},
                {day:4, date:"22 Feb", sehri:"5:09", iftar:"5:51"},
                {day:5, date:"23 Feb", sehri:"5:08", iftar:"5:52"},
                {day:6, date:"24 Feb", sehri:"5:07", iftar:"5:53"},
                {day:7, date:"25 Feb", sehri:"5:06", iftar:"5:54"},
                {day:8, date:"26 Feb", sehri:"5:04", iftar:"5:55"},
                {day:9, date:"27 Feb", sehri:"5:03", iftar:"5:56"},
                {day:10, date:"28 Feb", sehri:"5:02", iftar:"5:57"},
                {day:11, date:"1 Mar", sehri:"5:01", iftar:"5:58"},
                {day:12, date:"2 Mar", sehri:"5:00", iftar:"5:59"},
                {day:13, date:"3 Mar", sehri:"4:59", iftar:"6:00"},
                {day:14, date:"4 Mar", sehri:"4:57", iftar:"6:01"},
                {day:15, date:"5 Mar", sehri:"4:56", iftar:"6:02"},
                {day:16, date:"6 Mar", sehri:"4:55", iftar:"6:03"},
                {day:17, date:"7 Mar", sehri:"4:54", iftar:"6:04"},
                {day:18, date:"8 Mar", sehri:"4:52", iftar:"6:05"},
                {day:19, date:"9 Mar", sehri:"4:51", iftar:"6:06"},
                {day:20, date:"10 Mar", sehri:"4:50", iftar:"6:07"},
                {day:21, date:"11 Mar", sehri:"4:48", iftar:"6:08"},
                {day:22, date:"12 Mar", sehri:"4:47", iftar:"6:09"},
                {day:23, date:"13 Mar", sehri:"4:46", iftar:"6:10"},
                {day:24, date:"14 Mar", sehri:"4:44", iftar:"6:11"},
                {day:25, date:"15 Mar", sehri:"4:43", iftar:"6:12"},
                {day:26, date:"16 Mar", sehri:"4:42", iftar:"6:13"},
                {day:27, date:"17 Mar", sehri:"4:40", iftar:"6:14"},
                {day:28, date:"18 Mar", sehri:"4:39", iftar:"6:15"},
                {day:29, date:"19 Mar", sehri:"4:38", iftar:"6:16"},
                {day:30, date:"20 Mar", sehri:"4:36", iftar:"6:17"}
            ]
        };
        
        let currentCity = 'lahore';
        let currentTimings = cityTimings.lahore;
        let tasbeeh = parseInt(localStorage.getItem('tasbeeh')) || 0;
        
        function loadCalendar() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            
            let data = null;
            
            if (id && localStorage.getItem(id)) {
                data = JSON.parse(localStorage.getItem(id));
            } else if (id && sessionStorage.getItem(id)) {
                data = JSON.parse(sessionStorage.getItem(id));
            } else {
                data = {
                    businessName: "Ø§Ù„Ù…Ø¯ÛŒÙ†Û Ø¬ÛŒÙˆÙ„Ø±Ø²",
                    phoneNumber: "03001234567",
                    email: "info@example.com",
                    businessType: "Jewellery Store",
                    address: "Ù…Ø§ÚˆÙ„ Ù¹Ø§Ø¤Ù†ØŒ Ù„Ø§ÛÙˆØ±",
                    businessDetails: "Ø³ÙˆÙ†Û’ Ú†Ø§Ù†Ø¯ÛŒ Ú©ÛŒ Ù…ØµÙ†ÙˆØ¹Ø§Øª",
                    profileIcon: "fa-store",
                    whatsappNumber: "03001234567"
                };
            }
            
            renderCalendar(data, currentTimings, currentCity);
        }
        
        function changeCity() {
            const select = document.getElementById('citySelect');
            currentCity = select.value;
            currentTimings = cityTimings[currentCity];
            
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            
            let data = null;
            if (id && localStorage.getItem(id)) {
                data = JSON.parse(localStorage.getItem(id));
            } else if (id && sessionStorage.getItem(id)) {
                data = JSON.parse(sessionStorage.getItem(id));
            } else {
                data = {
                    businessName: "Ø§Ù„Ù…Ø¯ÛŒÙ†Û Ø¬ÛŒÙˆÙ„Ø±Ø²",
                    phoneNumber: "03001234567",
                    email: "info@example.com",
                    businessType: "Jewellery Store",
                    address: "Ù…Ø§ÚˆÙ„ Ù¹Ø§Ø¤Ù†ØŒ Ù„Ø§ÛÙˆØ±",
                    businessDetails: "Ø³ÙˆÙ†Û’ Ú†Ø§Ù†Ø¯ÛŒ Ú©ÛŒ Ù…ØµÙ†ÙˆØ¹Ø§Øª",
                    profileIcon: "fa-store",
                    whatsappNumber: "03001234567"
                };
            }
            
            renderCalendar(data, currentTimings, currentCity);
        }
        
        function renderCalendar(data, timings, cityName) {
            const profilePic = localStorage.getItem('profilePic') || '';
            const today = new Date();
            const ramadanStart = new Date(2026, 1, 19);
            const fastNum = Math.floor((today - ramadanStart) / (1000*60*60*24)) + 1;
            
            let rows = '';
            timings.forEach(row => {
                const cls = (fastNum === row.day) ? 'today-row' : '';
                rows += `<tr class="${cls}"><td>${row.day}</td><td>${row.date}</td><td>${row.sehri} AM</td><td>${row.iftar} PM</td></tr>`;
            });
            
            const picHtml = profilePic ? `<img src="${profilePic}" style="width:100%; height:100%; object-fit:cover;">` : `<i class="fas ${data.profileIcon}"></i>`;
            
            const whatsappLink = data.whatsappNumber ? `https://wa.me/${data.whatsappNumber.replace(/[^0-9]/g, '')}` : '#';
            
            // City display names in Urdu
            const cityNames = {
                lahore: 'Ù„Ø§ÛÙˆØ±',
                karachi: 'Ú©Ø±Ø§Ú†ÛŒ',
                islamabad: 'Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯'
            };
            
            const html = `
                <div class="profile-card">
                    <div class="profile-pic">${picHtml}</div>
                    <div class="profile-info">
                        <div class="profile-name">${data.businessName}</div>
                        <div class="profile-detail"><i class="fas fa-tag"></i> ${data.businessType}</div>
                        <div class="profile-detail"><i class="fas fa-map-marker-alt"></i> ${data.address}</div>
                        <div>
                            <span class="contact-badge" onclick='openLink("tel:${data.phoneNumber}")'><i class="fas fa-phone"></i> ${data.phoneNumber}</span>
                            ${data.email ? `<span class="contact-badge" onclick='openLink("mailto:${data.email}")'><i class="fas fa-envelope"></i></span>` : ''}
                            ${data.whatsappNumber ? `<span class="contact-badge" onclick='openLink("${whatsappLink}")'><i class="fab fa-whatsapp"></i></span>` : ''}
                        </div>
                        ${data.businessDetails ? `<div class="profile-detail"><i class="fas fa-info-circle"></i> ${data.businessDetails}</div>` : ''}
                    </div>
                </div>
                
                <!-- City Selector -->
                <div class="city-selector">
                    <i class="fas fa-map-marker-alt"></i>
                    <select id="citySelect" onchange="changeCity()">
                        <option value="lahore" ${cityName === 'lahore' ? 'selected' : ''}>Ù„Ø§ÛÙˆØ±</option>
                        <option value="karachi" ${cityName === 'karachi' ? 'selected' : ''}>Ú©Ø±Ø§Ú†ÛŒ</option>
                        <option value="islamabad" ${cityName === 'islamabad' ? 'selected' : ''}>Ø§Ø³Ù„Ø§Ù… Ø¢Ø¨Ø§Ø¯</option>
                    </select>
                </div>
                
                <div class="ramadan-header">
                    <h2>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† 1447</h2>
                    <span>${cityNames[cityName]}</span>
                </div>
                
                <div class="icon-row">
                    <div class="icon-item" onclick="openTasbeeh()"><i class="fas fa-tasbih"></i><span>ØªØ³Ø¨ÛŒØ­</span></div>
                    <div class="icon-item" onclick='openLink("https://quran.com/ur")'><i class="fas fa-quran"></i><span>Ù‚Ø±Ø¢Ù†</span></div>
                    <div class="icon-item" onclick='openLink("https://equran.com/")'><i class="fas fa-headphones"></i><span>Ø¢ÚˆÛŒÙˆ</span></div>
                    <div class="icon-item" onclick="openDuas()"><i class="fas fa-hand-praying"></i><span>Ø¯Ø¹Ø§Ø¦ÛŒÚº</span></div>
                </div>
                
                <div class="live-timer">
                    <div class="timer-row">
                        <div class="timer-block"><i class="fas fa-utensils"></i><span>Ø³Ø­Ø±ÛŒ</span><span class="timer-value" id="sehriTimer">05:18:00</span></div>
                        <div class="timer-block"><i class="fas fa-sun"></i><span>Ø§ÙØ·Ø§Ø±ÛŒ</span><span class="timer-value" id="iftarTimer">05:54:00</span></div>
                    </div>
                    <div class="dua-ticker" onclick="openDuas()" id="duaTicker">Ø¯Ø¹Ø§Ø¦Û’ Ø³Ø­Ø±ÛŒ</div>
                </div>
                
                <div class="quran-box" onclick='openLink("https://quran.com/ur")'>
                    <i class="fas fa-quran"></i>
                    <h2>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h2>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-title"><i class="fas fa-clock"></i> Ø³Ø­Ø±ÛŒ Ùˆ Ø§ÙØ·Ø§Ø±ÛŒ Â· ${cityNames[cityName]}</div>
                    <div class="table-scroll">
                        <table class="calendar-table">
                            <thead><tr><th>Ø±ÙˆØ²Û</th><th>ØªØ§Ø±ÛŒØ®</th><th>Ø³Ø­Ø±ÛŒ</th><th>Ø§ÙØ·Ø§Ø±ÛŒ</th></tr></thead>
                            <tbody>${rows}</tbody>
                        </table>
                    </div>
                </div>
                
                <div class="footer">
                    <p>ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ú© 1447Ú¾ Â· 2026Ø¡</p>
                </div>
            `;
            
            document.getElementById('calendarContent').innerHTML = html;
            updateTimer();
        }
        
        // Timer Functions
        function updateTimer() {
            const sehri = document.getElementById('sehriTimer');
            const iftar = document.getElementById('iftarTimer');
            const dua = document.getElementById('duaTicker');
            
            if (!sehri || !iftar) return;
            
            const now = new Date();
            const sehriTime = new Date(now); 
            const iftarTime = new Date(now);
            
            // Use first day timings for demo
            sehriTime.setHours(5, 18, 0);
            iftarTime.setHours(17, 54, 0);
            
            if (now > sehriTime) sehriTime.setDate(sehriTime.getDate() + 1);
            if (now > iftarTime) iftarTime.setDate(iftarTime.getDate() + 1);
            
            sehri.innerText = formatTime(sehriTime - now);
            iftar.innerText = formatTime(iftarTime - now);
            
            if (now < iftarTime && now > new Date().setHours(5, 18, 0)) {
                dua.innerText = "Ø¯Ø¹Ø§Ø¦Û’ Ø§ÙØ·Ø§Ø±: Ø°ÙÙ‡ÙØ¨Ù Ø§Ù„Ø¸ÙÙ‘Ù…ÙØ£Ù";
            } else {
                dua.innerText = "Ø¯Ø¹Ø§Ø¦Û’ Ø³Ø­Ø±ÛŒ: ÙˆÙØ¨ÙØµÙÙˆÙ’Ù…Ù ØºÙØ¯Ù Ù†ÙÙ‘ÙˆÙÙŠÙ’ØªÙ";
            }
        }
        
        function formatTime(ms) {
            if (ms < 0) return "00:00:00";
            const h = Math.floor(ms / (1000*60*60));
            const m = Math.floor((ms % (1000*60*60)) / (1000*60));
            const s = Math.floor((ms % (1000*60)) / 1000);
            return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }
        
        // Modal Functions
        function openTasbeeh() { document.getElementById('tasbeehModal').style.display = 'block'; }
        function openDuas() { document.getElementById('duasModal').style.display = 'block'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        
        function addTasbeeh(val) { tasbeeh += val; document.getElementById('tasbeehCount').innerText = tasbeeh; }
        function resetTasbeeh() { tasbeeh = 0; document.getElementById('tasbeehCount').innerText = tasbeeh; }
        function saveTasbeeh() { localStorage.setItem('tasbeeh', tasbeeh); alert('Ù…Ø­ÙÙˆØ¸ ÛÙˆ Ú¯ÛŒØ§'); }
        function loadTasbeeh() { 
            const saved = localStorage.getItem('tasbeeh');
            if (saved) { tasbeeh = parseInt(saved); document.getElementById('tasbeehCount').innerText = tasbeeh; }
        }
        
        window.onclick = (e) => {
            if (e.target.classList.contains('modal')) e.target.style.display = 'none';
        };
        
        loadCalendar();
        setInterval(updateTimer, 1000);
        document.getElementById('tasbeehCount').innerText = tasbeeh;
    </script>
</body>
</html>
